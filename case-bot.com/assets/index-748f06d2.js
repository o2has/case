import{u as e,b as a,c as t,d as s,e as i,f as l,h as n,n as r,r as o,w as c,i as u,j as d,k as v,t as p,F as m,l as g,m as f,p as h,q as w,o as b,v as y,x as k,y as C,T,z as A,A as _,B as S,C as I,D as x,E,G as O,H as M,I as P,J as N,K as D,a as F,L as R,M as U,N as L,O as B}from"./vendor-953edac2.js";import{u as z,a as W,b as j,T as $}from"./ui-5d8ff2c0.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const q=(e,a)=>{const t=e.__vccOpts||e;for(const[s,i]of a)t[s]=i;return t},H={class:"footer-menu"},G=q({__name:"FooterMenu",setup(o){const c=e(),u=a(),d=t((()=>c.path)),v=e=>{d.value!==e&&u.push(e)};return(e,a)=>(s(),i("nav",H,[l("div",{class:r(["footer-tab",{"footer-tab-active":"/"===d.value}]),onClick:a[0]||(a[0]=e=>v("/"))},a[5]||(a[5]=[n('<div class="footer-icon" data-v-c7cebee5><div class="main-icon" data-v-c7cebee5><div class="main-square" data-v-c7cebee5></div><div class="main-square" data-v-c7cebee5></div><div class="main-square" data-v-c7cebee5></div><div class="main-square" data-v-c7cebee5></div></div></div><div class="footer-label" data-v-c7cebee5>Main</div>',2)]),2),l("div",{class:r(["footer-tab",{"footer-tab-active":"/weekly"===d.value}]),onClick:a[1]||(a[1]=e=>v("/weekly"))},a[6]||(a[6]=[l("div",{class:"footer-icon"},[l("img",{src:"/images/effects/lightning.svg",alt:"Weekly",class:"icon-image"})],-1),l("div",{class:"footer-label"},"Weekly",-1)]),2),l("div",{class:r(["footer-tab",{"footer-tab-active":"/upgrade"===d.value}]),onClick:a[2]||(a[2]=e=>v("/upgrade"))},a[7]||(a[7]=[l("div",{class:"footer-icon"},[l("img",{src:"/images/effects/upgrade.svg",alt:"Upgrade",class:"icon-image"})],-1),l("div",{class:"footer-label"},"Upgrade",-1)]),2),l("div",{class:r(["footer-tab",{"footer-tab-active":"/invite"===d.value}]),onClick:a[3]||(a[3]=e=>v("/invite"))},a[8]||(a[8]=[l("div",{class:"footer-icon"},[l("img",{src:"/images/effects/user.svg",alt:"Invite",class:"icon-image"})],-1),l("div",{class:"footer-label"},"Invite",-1)]),2),l("div",{class:r(["footer-tab",{"footer-tab-active":"/profile"===d.value}]),onClick:a[4]||(a[4]=e=>v("/profile"))},a[9]||(a[9]=[l("div",{class:"footer-icon"},[l("img",{src:"/images/effects/profile.svg",alt:"Profile",class:"icon-image"})],-1),l("div",{class:"footer-label"},"Profile",-1)]),2)]))}},[["__scopeId","data-v-c7cebee5"]]);function J(e,a){return function(){return e.apply(a,arguments)}}const{toString:V}=Object.prototype,{getPrototypeOf:K}=Object,Y=(Q=Object.create(null),e=>{const a=V.call(e);return Q[a]||(Q[a]=a.slice(8,-1).toLowerCase())});var Q;const X=e=>(e=e.toLowerCase(),a=>Y(a)===e),Z=e=>a=>typeof a===e,{isArray:ee}=Array,ae=Z("undefined");const te=X("ArrayBuffer");const se=Z("string"),ie=Z("function"),le=Z("number"),ne=e=>null!==e&&"object"==typeof e,re=e=>{if("object"!==Y(e))return!1;const a=K(e);return!(null!==a&&a!==Object.prototype&&null!==Object.getPrototypeOf(a)||Symbol.toStringTag in e||Symbol.iterator in e)},oe=X("Date"),ce=X("File"),ue=X("Blob"),de=X("FileList"),ve=X("URLSearchParams"),[pe,me,ge,fe]=["ReadableStream","Request","Response","Headers"].map(X);function he(e,a,{allOwnKeys:t=!1}={}){if(null==e)return;let s,i;if("object"!=typeof e&&(e=[e]),ee(e))for(s=0,i=e.length;s<i;s++)a.call(null,e[s],s,e);else{const i=t?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let n;for(s=0;s<l;s++)n=i[s],a.call(null,e[n],n,e)}}function we(e,a){a=a.toLowerCase();const t=Object.keys(e);let s,i=t.length;for(;i-- >0;)if(s=t[i],a===s.toLowerCase())return s;return null}const be="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,ye=e=>!ae(e)&&e!==be;const ke=(Ce="undefined"!=typeof Uint8Array&&K(Uint8Array),e=>Ce&&e instanceof Ce);var Ce;const Te=X("HTMLFormElement"),Ae=(({hasOwnProperty:e})=>(a,t)=>e.call(a,t))(Object.prototype),_e=X("RegExp"),Se=(e,a)=>{const t=Object.getOwnPropertyDescriptors(e),s={};he(t,((t,i)=>{let l;!1!==(l=a(t,i,e))&&(s[i]=l||t)})),Object.defineProperties(e,s)};const Ie=X("AsyncFunction"),xe=(Ee="function"==typeof setImmediate,Oe=ie(be.postMessage),Ee?setImmediate:Oe?(Me=`axios@${Math.random()}`,Pe=[],be.addEventListener("message",(({source:e,data:a})=>{e===be&&a===Me&&Pe.length&&Pe.shift()()}),!1),e=>{Pe.push(e),be.postMessage(Me,"*")}):e=>setTimeout(e));var Ee,Oe,Me,Pe;const Ne="undefined"!=typeof queueMicrotask?queueMicrotask.bind(be):"undefined"!=typeof process&&process.nextTick||xe,De={isArray:ee,isArrayBuffer:te,isBuffer:function(e){return null!==e&&!ae(e)&&null!==e.constructor&&!ae(e.constructor)&&ie(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let a;return e&&("function"==typeof FormData&&e instanceof FormData||ie(e.append)&&("formdata"===(a=Y(e))||"object"===a&&ie(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let a;return a="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&te(e.buffer),a},isString:se,isNumber:le,isBoolean:e=>!0===e||!1===e,isObject:ne,isPlainObject:re,isReadableStream:pe,isRequest:me,isResponse:ge,isHeaders:fe,isUndefined:ae,isDate:oe,isFile:ce,isBlob:ue,isRegExp:_e,isFunction:ie,isStream:e=>ne(e)&&ie(e.pipe),isURLSearchParams:ve,isTypedArray:ke,isFileList:de,forEach:he,merge:function e(){const{caseless:a}=ye(this)&&this||{},t={},s=(s,i)=>{const l=a&&we(t,i)||i;re(t[l])&&re(s)?t[l]=e(t[l],s):re(s)?t[l]=e({},s):ee(s)?t[l]=s.slice():t[l]=s};for(let i=0,l=arguments.length;i<l;i++)arguments[i]&&he(arguments[i],s);return t},extend:(e,a,t,{allOwnKeys:s}={})=>(he(a,((a,s)=>{t&&ie(a)?e[s]=J(a,t):e[s]=a}),{allOwnKeys:s}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,a,t,s)=>{e.prototype=Object.create(a.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:a.prototype}),t&&Object.assign(e.prototype,t)},toFlatObject:(e,a,t,s)=>{let i,l,n;const r={};if(a=a||{},null==e)return a;do{for(i=Object.getOwnPropertyNames(e),l=i.length;l-- >0;)n=i[l],s&&!s(n,e,a)||r[n]||(a[n]=e[n],r[n]=!0);e=!1!==t&&K(e)}while(e&&(!t||t(e,a))&&e!==Object.prototype);return a},kindOf:Y,kindOfTest:X,endsWith:(e,a,t)=>{e=String(e),(void 0===t||t>e.length)&&(t=e.length),t-=a.length;const s=e.indexOf(a,t);return-1!==s&&s===t},toArray:e=>{if(!e)return null;if(ee(e))return e;let a=e.length;if(!le(a))return null;const t=new Array(a);for(;a-- >0;)t[a]=e[a];return t},forEachEntry:(e,a)=>{const t=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=t.next())&&!s.done;){const t=s.value;a.call(e,t[0],t[1])}},matchAll:(e,a)=>{let t;const s=[];for(;null!==(t=e.exec(a));)s.push(t);return s},isHTMLForm:Te,hasOwnProperty:Ae,hasOwnProp:Ae,reduceDescriptors:Se,freezeMethods:e=>{Se(e,((a,t)=>{if(ie(e)&&-1!==["arguments","caller","callee"].indexOf(t))return!1;const s=e[t];ie(s)&&(a.enumerable=!1,"writable"in a?a.writable=!1:a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")}))}))},toObjectSet:(e,a)=>{const t={},s=e=>{e.forEach((e=>{t[e]=!0}))};return ee(e)?s(e):s(String(e).split(a)),t},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,a,t){return a.toUpperCase()+t})),noop:()=>{},toFiniteNumber:(e,a)=>null!=e&&Number.isFinite(e=+e)?e:a,findKey:we,global:be,isContextDefined:ye,isSpecCompliantForm:function(e){return!!(e&&ie(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const a=new Array(10),t=(e,s)=>{if(ne(e)){if(a.indexOf(e)>=0)return;if(!("toJSON"in e)){a[s]=e;const i=ee(e)?[]:{};return he(e,((e,a)=>{const l=t(e,s+1);!ae(l)&&(i[a]=l)})),a[s]=void 0,i}}return e};return t(e,0)},isAsyncFn:Ie,isThenable:e=>e&&(ne(e)||ie(e))&&ie(e.then)&&ie(e.catch),setImmediate:xe,asap:Ne};function Fe(e,a,t,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",a&&(this.code=a),t&&(this.config=t),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}De.inherits(Fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:De.toJSONObject(this.config),code:this.code,status:this.status}}});const Re=Fe.prototype,Ue={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Ue[e]={value:e}})),Object.defineProperties(Fe,Ue),Object.defineProperty(Re,"isAxiosError",{value:!0}),Fe.from=(e,a,t,s,i,l)=>{const n=Object.create(Re);return De.toFlatObject(e,n,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Fe.call(n,e.message,a,t,s,i),n.cause=e,n.name=e.name,l&&Object.assign(n,l),n};function Le(e){return De.isPlainObject(e)||De.isArray(e)}function Be(e){return De.endsWith(e,"[]")?e.slice(0,-2):e}function ze(e,a,t){return e?e.concat(a).map((function(e,a){return e=Be(e),!t&&a?"["+e+"]":e})).join(t?".":""):a}const We=De.toFlatObject(De,{},null,(function(e){return/^is[A-Z]/.test(e)}));function je(e,a,t){if(!De.isObject(e))throw new TypeError("target must be an object");a=a||new FormData;const s=(t=De.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,a){return!De.isUndefined(a[e])}))).metaTokens,i=t.visitor||c,l=t.dots,n=t.indexes,r=(t.Blob||"undefined"!=typeof Blob&&Blob)&&De.isSpecCompliantForm(a);if(!De.isFunction(i))throw new TypeError("visitor must be a function");function o(e){if(null===e)return"";if(De.isDate(e))return e.toISOString();if(!r&&De.isBlob(e))throw new Fe("Blob is not supported. Use a Buffer instead.");return De.isArrayBuffer(e)||De.isTypedArray(e)?r&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,t,i){let r=e;if(e&&!i&&"object"==typeof e)if(De.endsWith(t,"{}"))t=s?t:t.slice(0,-2),e=JSON.stringify(e);else if(De.isArray(e)&&function(e){return De.isArray(e)&&!e.some(Le)}(e)||(De.isFileList(e)||De.endsWith(t,"[]"))&&(r=De.toArray(e)))return t=Be(t),r.forEach((function(e,s){!De.isUndefined(e)&&null!==e&&a.append(!0===n?ze([t],s,l):null===n?t:t+"[]",o(e))})),!1;return!!Le(e)||(a.append(ze(i,t,l),o(e)),!1)}const u=[],d=Object.assign(We,{defaultVisitor:c,convertValue:o,isVisitable:Le});if(!De.isObject(e))throw new TypeError("data must be an object");return function e(t,s){if(!De.isUndefined(t)){if(-1!==u.indexOf(t))throw Error("Circular reference detected in "+s.join("."));u.push(t),De.forEach(t,(function(t,l){!0===(!(De.isUndefined(t)||null===t)&&i.call(a,t,De.isString(l)?l.trim():l,s,d))&&e(t,s?s.concat(l):[l])})),u.pop()}}(e),a}function $e(e){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return a[e]}))}function qe(e,a){this._pairs=[],e&&je(e,this,a)}const He=qe.prototype;function Ge(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Je(e,a,t){if(!a)return e;const s=t&&t.encode||Ge;De.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let l;if(l=i?i(a,t):De.isURLSearchParams(a)?a.toString():new qe(a,t).toString(s),l){const a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+l}return e}He.append=function(e,a){this._pairs.push([e,a])},He.toString=function(e){const a=e?function(a){return e.call(this,a,$e)}:$e;return this._pairs.map((function(e){return a(e[0])+"="+a(e[1])}),"").join("&")};const Ve=class{constructor(){this.handlers=[]}use(e,a,t){return this.handlers.push({fulfilled:e,rejected:a,synchronous:!!t&&t.synchronous,runWhen:t?t.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){De.forEach(this.handlers,(function(a){null!==a&&e(a)}))}},Ke={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ye={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:qe,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Qe="undefined"!=typeof window&&"undefined"!=typeof document,Xe="object"==typeof navigator&&navigator||void 0,Ze=Qe&&(!Xe||["ReactNative","NativeScript","NS"].indexOf(Xe.product)<0),ea="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,aa=Qe&&window.location.href||"http://localhost",ta={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Qe,hasStandardBrowserEnv:Ze,hasStandardBrowserWebWorkerEnv:ea,navigator:Xe,origin:aa},Symbol.toStringTag,{value:"Module"})),...Ye};function sa(e){function a(e,t,s,i){let l=e[i++];if("__proto__"===l)return!0;const n=Number.isFinite(+l),r=i>=e.length;if(l=!l&&De.isArray(s)?s.length:l,r)return De.hasOwnProp(s,l)?s[l]=[s[l],t]:s[l]=t,!n;s[l]&&De.isObject(s[l])||(s[l]=[]);return a(e,t,s[l],i)&&De.isArray(s[l])&&(s[l]=function(e){const a={},t=Object.keys(e);let s;const i=t.length;let l;for(s=0;s<i;s++)l=t[s],a[l]=e[l];return a}(s[l])),!n}if(De.isFormData(e)&&De.isFunction(e.entries)){const t={};return De.forEachEntry(e,((e,s)=>{a(function(e){return De.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),s,t,0)})),t}return null}const ia={transitional:Ke,adapter:["xhr","http","fetch"],transformRequest:[function(e,a){const t=a.getContentType()||"",s=t.indexOf("application/json")>-1,i=De.isObject(e);i&&De.isHTMLForm(e)&&(e=new FormData(e));if(De.isFormData(e))return s?JSON.stringify(sa(e)):e;if(De.isArrayBuffer(e)||De.isBuffer(e)||De.isStream(e)||De.isFile(e)||De.isBlob(e)||De.isReadableStream(e))return e;if(De.isArrayBufferView(e))return e.buffer;if(De.isURLSearchParams(e))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(t.indexOf("application/x-www-form-urlencoded")>-1)return function(e,a){return je(e,new ta.classes.URLSearchParams,Object.assign({visitor:function(e,a,t,s){return ta.isNode&&De.isBuffer(e)?(this.append(a,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},a))}(e,this.formSerializer).toString();if((l=De.isFileList(e))||t.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return je(l?{"files[]":e}:e,a&&new a,this.formSerializer)}}return i||s?(a.setContentType("application/json",!1),function(e,a,t){if(De.isString(e))try{return(a||JSON.parse)(e),De.trim(e)}catch(s){if("SyntaxError"!==s.name)throw s}return(t||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const a=this.transitional||ia.transitional,t=a&&a.forcedJSONParsing,s="json"===this.responseType;if(De.isResponse(e)||De.isReadableStream(e))return e;if(e&&De.isString(e)&&(t&&!this.responseType||s)){const t=!(a&&a.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(i){if(t){if("SyntaxError"===i.name)throw Fe.from(i,Fe.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ta.classes.FormData,Blob:ta.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};De.forEach(["delete","get","head","post","put","patch"],(e=>{ia.headers[e]={}}));const la=ia,na=De.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ra=Symbol("internals");function oa(e){return e&&String(e).trim().toLowerCase()}function ca(e){return!1===e||null==e?e:De.isArray(e)?e.map(ca):String(e)}function ua(e,a,t,s,i){return De.isFunction(s)?s.call(this,a,t):(i&&(a=t),De.isString(a)?De.isString(s)?-1!==a.indexOf(s):De.isRegExp(s)?s.test(a):void 0:void 0)}class da{constructor(e){e&&this.set(e)}set(e,a,t){const s=this;function i(e,a,t){const i=oa(a);if(!i)throw new Error("header name must be a non-empty string");const l=De.findKey(s,i);(!l||void 0===s[l]||!0===t||void 0===t&&!1!==s[l])&&(s[l||a]=ca(e))}const l=(e,a)=>De.forEach(e,((e,t)=>i(e,t,a)));if(De.isPlainObject(e)||e instanceof this.constructor)l(e,a);else if(De.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))l((e=>{const a={};let t,s,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),t=e.substring(0,i).trim().toLowerCase(),s=e.substring(i+1).trim(),!t||a[t]&&na[t]||("set-cookie"===t?a[t]?a[t].push(s):a[t]=[s]:a[t]=a[t]?a[t]+", "+s:s)})),a})(e),a);else if(De.isHeaders(e))for(const[n,r]of e.entries())i(r,n,t);else null!=e&&i(a,e,t);return this}get(e,a){if(e=oa(e)){const t=De.findKey(this,e);if(t){const e=this[t];if(!a)return e;if(!0===a)return function(e){const a=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(e);)a[s[1]]=s[2];return a}(e);if(De.isFunction(a))return a.call(this,e,t);if(De.isRegExp(a))return a.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,a){if(e=oa(e)){const t=De.findKey(this,e);return!(!t||void 0===this[t]||a&&!ua(0,this[t],t,a))}return!1}delete(e,a){const t=this;let s=!1;function i(e){if(e=oa(e)){const i=De.findKey(t,e);!i||a&&!ua(0,t[i],i,a)||(delete t[i],s=!0)}}return De.isArray(e)?e.forEach(i):i(e),s}clear(e){const a=Object.keys(this);let t=a.length,s=!1;for(;t--;){const i=a[t];e&&!ua(0,this[i],i,e,!0)||(delete this[i],s=!0)}return s}normalize(e){const a=this,t={};return De.forEach(this,((s,i)=>{const l=De.findKey(t,i);if(l)return a[l]=ca(s),void delete a[i];const n=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,a,t)=>a.toUpperCase()+t))}(i):String(i).trim();n!==i&&delete a[i],a[n]=ca(s),t[n]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const a=Object.create(null);return De.forEach(this,((t,s)=>{null!=t&&!1!==t&&(a[s]=e&&De.isArray(t)?t.join(", "):t)})),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,a])=>e+": "+a)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...a){const t=new this(e);return a.forEach((e=>t.set(e))),t}static accessor(e){const a=(this[ra]=this[ra]={accessors:{}}).accessors,t=this.prototype;function s(e){const s=oa(e);a[s]||(!function(e,a){const t=De.toCamelCase(" "+a);["get","set","has"].forEach((s=>{Object.defineProperty(e,s+t,{value:function(e,t,i){return this[s].call(this,a,e,t,i)},configurable:!0})}))}(t,e),a[s]=!0)}return De.isArray(e)?e.forEach(s):s(e),this}}da.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),De.reduceDescriptors(da.prototype,(({value:e},a)=>{let t=a[0].toUpperCase()+a.slice(1);return{get:()=>e,set(e){this[t]=e}}})),De.freezeMethods(da);const va=da;function pa(e,a){const t=this||la,s=a||t,i=va.from(s.headers);let l=s.data;return De.forEach(e,(function(e){l=e.call(t,l,i.normalize(),a?a.status:void 0)})),i.normalize(),l}function ma(e){return!(!e||!e.__CANCEL__)}function ga(e,a,t){Fe.call(this,null==e?"canceled":e,Fe.ERR_CANCELED,a,t),this.name="CanceledError"}function fa(e,a,t){const s=t.config.validateStatus;t.status&&s&&!s(t.status)?a(new Fe("Request failed with status code "+t.status,[Fe.ERR_BAD_REQUEST,Fe.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t)):e(t)}De.inherits(ga,Fe,{__CANCEL__:!0});const ha=(e,a,t=3)=>{let s=0;const i=function(e,a){e=e||10;const t=new Array(e),s=new Array(e);let i,l=0,n=0;return a=void 0!==a?a:1e3,function(r){const o=Date.now(),c=s[n];i||(i=o),t[l]=r,s[l]=o;let u=n,d=0;for(;u!==l;)d+=t[u++],u%=e;if(l=(l+1)%e,l===n&&(n=(n+1)%e),o-i<a)return;const v=c&&o-c;return v?Math.round(1e3*d/v):void 0}}(50,250);return function(e,a){let t,s,i=0,l=1e3/a;const n=(a,l=Date.now())=>{i=l,t=null,s&&(clearTimeout(s),s=null),e.apply(null,a)};return[(...e)=>{const a=Date.now(),r=a-i;r>=l?n(e,a):(t=e,s||(s=setTimeout((()=>{s=null,n(t)}),l-r)))},()=>t&&n(t)]}((t=>{const l=t.loaded,n=t.lengthComputable?t.total:void 0,r=l-s,o=i(r);s=l;e({loaded:l,total:n,progress:n?l/n:void 0,bytes:r,rate:o||void 0,estimated:o&&n&&l<=n?(n-l)/o:void 0,event:t,lengthComputable:null!=n,[a?"download":"upload"]:!0})}),t)},wa=(e,a)=>{const t=null!=e;return[s=>a[0]({lengthComputable:t,total:e,loaded:s}),a[1]]},ba=e=>(...a)=>De.asap((()=>e(...a))),ya=ta.hasStandardBrowserEnv?(ka=new URL(ta.origin),Ca=ta.navigator&&/(msie|trident)/i.test(ta.navigator.userAgent),e=>(e=new URL(e,ta.origin),ka.protocol===e.protocol&&ka.host===e.host&&(Ca||ka.port===e.port))):()=>!0;var ka,Ca;const Ta=ta.hasStandardBrowserEnv?{write(e,a,t,s,i,l){const n=[e+"="+encodeURIComponent(a)];De.isNumber(t)&&n.push("expires="+new Date(t).toGMTString()),De.isString(s)&&n.push("path="+s),De.isString(i)&&n.push("domain="+i),!0===l&&n.push("secure"),document.cookie=n.join("; ")},read(e){const a=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Aa(e,a,t){let s=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(a);return e&&(s||0==t)?function(e,a){return a?e.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):e}(e,a):a}const _a=e=>e instanceof va?{...e}:e;function Sa(e,a){a=a||{};const t={};function s(e,a,t,s){return De.isPlainObject(e)&&De.isPlainObject(a)?De.merge.call({caseless:s},e,a):De.isPlainObject(a)?De.merge({},a):De.isArray(a)?a.slice():a}function i(e,a,t,i){return De.isUndefined(a)?De.isUndefined(e)?void 0:s(void 0,e,0,i):s(e,a,0,i)}function l(e,a){if(!De.isUndefined(a))return s(void 0,a)}function n(e,a){return De.isUndefined(a)?De.isUndefined(e)?void 0:s(void 0,e):s(void 0,a)}function r(t,i,l){return l in a?s(t,i):l in e?s(void 0,t):void 0}const o={url:l,method:l,data:l,baseURL:n,transformRequest:n,transformResponse:n,paramsSerializer:n,timeout:n,timeoutMessage:n,withCredentials:n,withXSRFToken:n,adapter:n,responseType:n,xsrfCookieName:n,xsrfHeaderName:n,onUploadProgress:n,onDownloadProgress:n,decompress:n,maxContentLength:n,maxBodyLength:n,beforeRedirect:n,transport:n,httpAgent:n,httpsAgent:n,cancelToken:n,socketPath:n,responseEncoding:n,validateStatus:r,headers:(e,a,t)=>i(_a(e),_a(a),0,!0)};return De.forEach(Object.keys(Object.assign({},e,a)),(function(s){const l=o[s]||i,n=l(e[s],a[s],s);De.isUndefined(n)&&l!==r||(t[s]=n)})),t}const Ia=e=>{const a=Sa({},e);let t,{data:s,withXSRFToken:i,xsrfHeaderName:l,xsrfCookieName:n,headers:r,auth:o}=a;if(a.headers=r=va.from(r),a.url=Je(Aa(a.baseURL,a.url,a.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&r.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),De.isFormData(s))if(ta.hasStandardBrowserEnv||ta.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if(!1!==(t=r.getContentType())){const[e,...a]=t?t.split(";").map((e=>e.trim())).filter(Boolean):[];r.setContentType([e||"multipart/form-data",...a].join("; "))}if(ta.hasStandardBrowserEnv&&(i&&De.isFunction(i)&&(i=i(a)),i||!1!==i&&ya(a.url))){const e=l&&n&&Ta.read(n);e&&r.set(l,e)}return a},xa="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(a,t){const s=Ia(e);let i=s.data;const l=va.from(s.headers).normalize();let n,r,o,c,u,{responseType:d,onUploadProgress:v,onDownloadProgress:p}=s;function m(){c&&c(),u&&u(),s.cancelToken&&s.cancelToken.unsubscribe(n),s.signal&&s.signal.removeEventListener("abort",n)}let g=new XMLHttpRequest;function f(){if(!g)return;const s=va.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());fa((function(e){a(e),m()}),(function(e){t(e),m()}),{data:d&&"text"!==d&&"json"!==d?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:s,config:e,request:g}),g=null}g.open(s.method.toUpperCase(),s.url,!0),g.timeout=s.timeout,"onloadend"in g?g.onloadend=f:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(f)},g.onabort=function(){g&&(t(new Fe("Request aborted",Fe.ECONNABORTED,e,g)),g=null)},g.onerror=function(){t(new Fe("Network Error",Fe.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let a=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const i=s.transitional||Ke;s.timeoutErrorMessage&&(a=s.timeoutErrorMessage),t(new Fe(a,i.clarifyTimeoutError?Fe.ETIMEDOUT:Fe.ECONNABORTED,e,g)),g=null},void 0===i&&l.setContentType(null),"setRequestHeader"in g&&De.forEach(l.toJSON(),(function(e,a){g.setRequestHeader(a,e)})),De.isUndefined(s.withCredentials)||(g.withCredentials=!!s.withCredentials),d&&"json"!==d&&(g.responseType=s.responseType),p&&([o,u]=ha(p,!0),g.addEventListener("progress",o)),v&&g.upload&&([r,c]=ha(v),g.upload.addEventListener("progress",r),g.upload.addEventListener("loadend",c)),(s.cancelToken||s.signal)&&(n=a=>{g&&(t(!a||a.type?new ga(null,e,g):a),g.abort(),g=null)},s.cancelToken&&s.cancelToken.subscribe(n),s.signal&&(s.signal.aborted?n():s.signal.addEventListener("abort",n)));const h=function(e){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return a&&a[1]||""}(s.url);h&&-1===ta.protocols.indexOf(h)?t(new Fe("Unsupported protocol "+h+":",Fe.ERR_BAD_REQUEST,e)):g.send(i||null)}))},Ea=(e,a)=>{const{length:t}=e=e?e.filter(Boolean):[];if(a||t){let t,s=new AbortController;const i=function(e){if(!t){t=!0,n();const a=e instanceof Error?e:this.reason;s.abort(a instanceof Fe?a:new ga(a instanceof Error?a.message:a))}};let l=a&&setTimeout((()=>{l=null,i(new Fe(`timeout ${a} of ms exceeded`,Fe.ETIMEDOUT))}),a);const n=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:r}=s;return r.unsubscribe=()=>De.asap(n),r}},Oa=function*(e,a){let t=e.byteLength;if(!a||t<a)return void(yield e);let s,i=0;for(;i<t;)s=i+a,yield e.slice(i,s),i=s},Ma=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const a=e.getReader();try{for(;;){const{done:e,value:t}=await a.read();if(e)break;yield t}}finally{await a.cancel()}},Pa=(e,a,t,s)=>{const i=async function*(e,a){for await(const t of Ma(e))yield*Oa(t,a)}(e,a);let l,n=0,r=e=>{l||(l=!0,s&&s(e))};return new ReadableStream({async pull(e){try{const{done:a,value:s}=await i.next();if(a)return r(),void e.close();let l=s.byteLength;if(t){let e=n+=l;t(e)}e.enqueue(new Uint8Array(s))}catch(a){throw r(a),a}},cancel:e=>(r(e),i.return())},{highWaterMark:2})},Na="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,Da=Na&&"function"==typeof ReadableStream,Fa=Na&&("function"==typeof TextEncoder?(Ra=new TextEncoder,e=>Ra.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Ra;const Ua=(e,...a)=>{try{return!!e(...a)}catch(t){return!1}},La=Da&&Ua((()=>{let e=!1;const a=new Request(ta.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!a})),Ba=Da&&Ua((()=>De.isReadableStream(new Response("").body))),za={stream:Ba&&(e=>e.body)};var Wa;Na&&(Wa=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!za[e]&&(za[e]=De.isFunction(Wa[e])?a=>a[e]():(a,t)=>{throw new Fe(`Response type '${e}' is not supported`,Fe.ERR_NOT_SUPPORT,t)})})));const ja=async(e,a)=>{const t=De.toFiniteNumber(e.getContentLength());return null==t?(async e=>{if(null==e)return 0;if(De.isBlob(e))return e.size;if(De.isSpecCompliantForm(e)){const a=new Request(ta.origin,{method:"POST",body:e});return(await a.arrayBuffer()).byteLength}return De.isArrayBufferView(e)||De.isArrayBuffer(e)?e.byteLength:(De.isURLSearchParams(e)&&(e+=""),De.isString(e)?(await Fa(e)).byteLength:void 0)})(a):t},$a={http:null,xhr:xa,fetch:Na&&(async e=>{let{url:a,method:t,data:s,signal:i,cancelToken:l,timeout:n,onDownloadProgress:r,onUploadProgress:o,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:v}=Ia(e);c=c?(c+"").toLowerCase():"text";let p,m=Ea([i,l&&l.toAbortSignal()],n);const g=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let f;try{if(o&&La&&"get"!==t&&"head"!==t&&0!==(f=await ja(u,s))){let e,t=new Request(a,{method:"POST",body:s,duplex:"half"});if(De.isFormData(s)&&(e=t.headers.get("content-type"))&&u.setContentType(e),t.body){const[e,a]=wa(f,ha(ba(o)));s=Pa(t.body,65536,e,a)}}De.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;p=new Request(a,{...v,signal:m,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:i?d:void 0});let l=await fetch(p);const n=Ba&&("stream"===c||"response"===c);if(Ba&&(r||n&&g)){const e={};["status","statusText","headers"].forEach((a=>{e[a]=l[a]}));const a=De.toFiniteNumber(l.headers.get("content-length")),[t,s]=r&&wa(a,ha(ba(r),!0))||[];l=new Response(Pa(l.body,65536,t,(()=>{s&&s(),g&&g()})),e)}c=c||"text";let h=await za[De.findKey(za,c)||"text"](l,e);return!n&&g&&g(),await new Promise(((a,t)=>{fa(a,t,{data:h,headers:va.from(l.headers),status:l.status,statusText:l.statusText,config:e,request:p})}))}catch(h){if(g&&g(),h&&"TypeError"===h.name&&/fetch/i.test(h.message))throw Object.assign(new Fe("Network Error",Fe.ERR_NETWORK,e,p),{cause:h.cause||h});throw Fe.from(h,h&&h.code,e,p)}})};De.forEach($a,((e,a)=>{if(e){try{Object.defineProperty(e,"name",{value:a})}catch(t){}Object.defineProperty(e,"adapterName",{value:a})}}));const qa=e=>`- ${e}`,Ha=e=>De.isFunction(e)||null===e||!1===e,Ga=e=>{e=De.isArray(e)?e:[e];const{length:a}=e;let t,s;const i={};for(let l=0;l<a;l++){let a;if(t=e[l],s=t,!Ha(t)&&(s=$a[(a=String(t)).toLowerCase()],void 0===s))throw new Fe(`Unknown adapter '${a}'`);if(s)break;i[a||"#"+l]=s}if(!s){const e=Object.entries(i).map((([e,a])=>`adapter ${e} `+(!1===a?"is not supported by the environment":"is not available in the build")));throw new Fe("There is no suitable adapter to dispatch the request "+(a?e.length>1?"since :\n"+e.map(qa).join("\n"):" "+qa(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return s};function Ja(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ga(null,e)}function Va(e){Ja(e),e.headers=va.from(e.headers),e.data=pa.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ga(e.adapter||la.adapter)(e).then((function(a){return Ja(e),a.data=pa.call(e,e.transformResponse,a),a.headers=va.from(a.headers),a}),(function(a){return ma(a)||(Ja(e),a&&a.response&&(a.response.data=pa.call(e,e.transformResponse,a.response),a.response.headers=va.from(a.response.headers))),Promise.reject(a)}))}const Ka="1.8.4",Ya={};["object","boolean","number","function","string","symbol"].forEach(((e,a)=>{Ya[e]=function(t){return typeof t===e||"a"+(a<1?"n ":" ")+e}}));const Qa={};Ya.transitional=function(e,a,t){return(s,i,l)=>{if(!1===e)throw new Fe(function(e,a){return"[Axios v1.8.4] Transitional option '"+e+"'"+a+(t?". "+t:"")}(i," has been removed"+(a?" in "+a:"")),Fe.ERR_DEPRECATED);return a&&!Qa[i]&&(Qa[i]=!0),!e||e(s,i,l)}},Ya.spelling=function(e){return(e,a)=>!0};const Xa={assertOptions:function(e,a,t){if("object"!=typeof e)throw new Fe("options must be an object",Fe.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let i=s.length;for(;i-- >0;){const l=s[i],n=a[l];if(n){const a=e[l],t=void 0===a||n(a,l,e);if(!0!==t)throw new Fe("option "+l+" must be "+t,Fe.ERR_BAD_OPTION_VALUE)}else if(!0!==t)throw new Fe("Unknown option "+l,Fe.ERR_BAD_OPTION)}},validators:Ya},Za=Xa.validators;class et{constructor(e){this.defaults=e,this.interceptors={request:new Ve,response:new Ve}}async request(e,a){try{return await this._request(e,a)}catch(t){if(t instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const a=e.stack?e.stack.replace(/^.+\n/,""):"";try{t.stack?a&&!String(t.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(t.stack+="\n"+a):t.stack=a}catch(s){}}throw t}}_request(e,a){"string"==typeof e?(a=a||{}).url=e:a=e||{},a=Sa(this.defaults,a);const{transitional:t,paramsSerializer:s,headers:i}=a;void 0!==t&&Xa.assertOptions(t,{silentJSONParsing:Za.transitional(Za.boolean),forcedJSONParsing:Za.transitional(Za.boolean),clarifyTimeoutError:Za.transitional(Za.boolean)},!1),null!=s&&(De.isFunction(s)?a.paramsSerializer={serialize:s}:Xa.assertOptions(s,{encode:Za.function,serialize:Za.function},!0)),void 0!==a.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Xa.assertOptions(a,{baseUrl:Za.spelling("baseURL"),withXsrfToken:Za.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let l=i&&De.merge(i.common,i[a.method]);i&&De.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),a.headers=va.concat(l,i);const n=[];let r=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(a)||(r=r&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));const o=[];let c;this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)}));let u,d=0;if(!r){const e=[Va.bind(this),void 0];for(e.unshift.apply(e,n),e.push.apply(e,o),u=e.length,c=Promise.resolve(a);d<u;)c=c.then(e[d++],e[d++]);return c}u=n.length;let v=a;for(d=0;d<u;){const e=n[d++],a=n[d++];try{v=e(v)}catch(p){a.call(this,p);break}}try{c=Va.call(this,v)}catch(p){return Promise.reject(p)}for(d=0,u=o.length;d<u;)c=c.then(o[d++],o[d++]);return c}getUri(e){return Je(Aa((e=Sa(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}De.forEach(["delete","get","head","options"],(function(e){et.prototype[e]=function(a,t){return this.request(Sa(t||{},{method:e,url:a,data:(t||{}).data}))}})),De.forEach(["post","put","patch"],(function(e){function a(a){return function(t,s,i){return this.request(Sa(i||{},{method:e,headers:a?{"Content-Type":"multipart/form-data"}:{},url:t,data:s}))}}et.prototype[e]=a(),et.prototype[e+"Form"]=a(!0)}));const at=et;class tt{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let a;this.promise=new Promise((function(e){a=e}));const t=this;this.promise.then((e=>{if(!t._listeners)return;let a=t._listeners.length;for(;a-- >0;)t._listeners[a](e);t._listeners=null})),this.promise.then=e=>{let a;const s=new Promise((e=>{t.subscribe(e),a=e})).then(e);return s.cancel=function(){t.unsubscribe(a)},s},e((function(e,s,i){t.reason||(t.reason=new ga(e,s,i),a(t.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const a=this._listeners.indexOf(e);-1!==a&&this._listeners.splice(a,1)}toAbortSignal(){const e=new AbortController,a=a=>{e.abort(a)};return this.subscribe(a),e.signal.unsubscribe=()=>this.unsubscribe(a),e.signal}static source(){let e;return{token:new tt((function(a){e=a})),cancel:e}}}const st=tt;const it={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(it).forEach((([e,a])=>{it[a]=e}));const lt=it;const nt=function e(a){const t=new at(a),s=J(at.prototype.request,t);return De.extend(s,at.prototype,t,{allOwnKeys:!0}),De.extend(s,t,null,{allOwnKeys:!0}),s.create=function(t){return e(Sa(a,t))},s}(la);nt.Axios=at,nt.CanceledError=ga,nt.CancelToken=st,nt.isCancel=ma,nt.VERSION=Ka,nt.toFormData=je,nt.AxiosError=Fe,nt.Cancel=nt.CanceledError,nt.all=function(e){return Promise.all(e)},nt.spread=function(e){return function(a){return e.apply(null,a)}},nt.isAxiosError=function(e){return De.isObject(e)&&!0===e.isAxiosError},nt.mergeConfig=Sa,nt.AxiosHeaders=va,nt.formToJSON=e=>sa(De.isHTMLForm(e)?new FormData(e):e),nt.getAdapter=Ga,nt.HttpStatusCode=lt,nt.default=nt;const rt=nt,ot=q({__name:"Coin",props:{size:{type:String,default:"medium"}},setup:e=>(a,t)=>(s(),i("div",{class:r(["coin",[e.size]])},t[0]||(t[0]=[l("img",{class:"coin-image",src:"/images/actions/ton.svg",alt:"Coin"},null,-1)]),2))},[["__scopeId","data-v-b078ba53"]]),ct={key:0,class:"unlucky-container"},ut={key:1,class:"prize-showcase"},dt={class:"lights-container"},vt=["src"],pt={key:0,class:"prize-placeholder"},mt=["src"],gt={key:1,class:"prize-image error-image",src:"/images/placeholder.png",alt:"Prize Item Placeholder"},ft={class:"hint"},ht={class:"coin-wrapper"},wt={class:"price"},bt={key:2,class:"coins-container"},yt={key:2,class:"prizes-row"},kt=["src","onLoad","onError"],Ct={class:"hint"},Tt={class:"coin-wrapper"},At={class:"price"},_t={key:0,class:"coins-container multi-coins"},St={key:3,class:"prizes-row"},It=["src","onLoad","onError"],xt={class:"hint"},Et={class:"coin-wrapper"},Ot={class:"price"},Mt={key:0,class:"coins-container multi-coins"},Pt=q({__name:"CaseWin",props:{prize:{type:[Object,Array],default:()=>({image:"/images/placeholder.png",price:"0"})},caseNumber:{type:Number,default:0},isBlackCase:{type:Boolean,default:!1}},setup(e,{expose:a}){const n=e,h=t((()=>Array.isArray(n.prize)&&n.prize.length>1)),w=t((()=>Array.isArray(n.prize)?n.prize.length:1)),b=o(!1),y=o(!1),k=o([]),C=o({}),T=o({}),A=t((()=>{var e;return Array.isArray(n.prize)?n.prize.reduce(((e,a)=>e+(parseFloat(a.price)||0)),0).toFixed(2):(null==(e=n.prize)?void 0:e.price)||"0"}));c((()=>n.prize),(e=>{e&&(C.value={},T.value={})}),{immediate:!0});const _=e=>{C.value[e]=!0},S=(e,a)=>{T.value[e]=!0};a({animateKeepIt:()=>{b.value=!0,setTimeout((()=>{b.value=!1}),1500)},animateQuickSell:()=>{y.value=!0;const e=parseFloat(A.value)/10,a=Math.floor(10+Math.min(e,15));k.value=Array(a).fill().map(((e,a)=>({id:a,left:Math.floor(80*Math.random())+10+"%",delay:.5*Math.random(),size:Math.floor(10*Math.random())+16+"px",speed:.5*Math.random()+1.2+"s"}))),setTimeout((()=>{y.value=!1,k.value=[]}),1500)}});const I=t((()=>22===n.caseNumber&&(!(!Array.isArray(n.prize)||0!==n.prize.length)||(!n.prize||n.prize&&0===Object.keys(n.prize).length||n.prize&&void 0===n.prize.originalData)))),x=e=>e&&e.image?e.image:"/images/placeholder.png",E=e=>e&&e.price?e.price:"0";return(a,t)=>(s(),i("div",{class:r(["win-container",{"multi-prizes":h.value}])},[I.value?(s(),i("div",ct,t[2]||(t[2]=[l("img",{class:"unlucky-image",src:"/images/effects/unlucky.png",alt:"Unlucky"},null,-1),l("div",{class:"unlucky-text"},[u(" Unluck "),l("br"),u(" You'll definitely get lucky next time, try again ")],-1)]))):h.value?2===w.value?(s(),i("div",yt,[(s(!0),i(m,null,g(e.prize,((e,a)=>(s(),i("div",{key:a,class:r(["prize-tab",{"black-backdrop-double":n.isBlackCase}])},[l("img",{class:"stars-bg",src:"/images/effects/stars.png",alt:"Stars",style:f({animationDelay:.5*a+"s"})},null,4),l("img",{class:"prize-item-image",src:x(e),alt:"Prize Item",onLoad:e=>_(a),onError:t=>S(a,x(e))},null,40,kt),l("div",Ct,[l("div",Tt,[v(ot,{size:"small"})]),l("div",At,p(E(e)),1)])],2)))),128)),y.value?(s(),i("div",_t,[(s(!0),i(m,null,g(k.value,(e=>(s(),i("div",{key:e.id,class:"flying-coin",style:f({left:e.left,animationDelay:e.delay+"s",width:e.size,height:e.size,animationDuration:e.speed})},[v(ot,{size:"small"})],4)))),128))])):d("",!0)])):3===w.value?(s(),i("div",St,[(s(!0),i(m,null,g(e.prize,((e,a)=>(s(),i("div",{key:a,class:r(["prize-tab",{"black-backdrop-triple":n.isBlackCase}])},[l("img",{class:"stars-bg",src:"/images/effects/stars.png",alt:"Stars",style:f({animationDelay:.5*a+"s"})},null,4),l("img",{class:"prize-item-image",src:x(e),alt:"Prize Item",onLoad:e=>_(a),onError:t=>S(a,x(e))},null,40,It),l("div",xt,[l("div",Et,[v(ot,{size:"small"})]),l("div",Ot,p(E(e)),1)])],2)))),128)),y.value?(s(),i("div",Mt,[(s(!0),i(m,null,g(k.value,(e=>(s(),i("div",{key:e.id,class:"flying-coin",style:f({left:e.left,animationDelay:e.delay+"s",width:e.size,height:e.size,animationDuration:e.speed})},[v(ot,{size:"small"})],4)))),128))])):d("",!0)])):d("",!0):(s(),i("div",ut,[l("div",dt,[l("img",{class:r(["lights",{"black-lights":n.isBlackCase}]),src:n.isBlackCase?"/images/effects/black_backdrop.svg":"/images/effects/lights.png",alt:"Background lights"},null,10,vt),t[3]||(t[3]=l("img",{class:"stars stars-animation",src:"/images/effects/stars.png",alt:"Stars"},null,-1))]),C.value[0]||T.value[0]?d("",!0):(s(),i("div",pt,t[4]||(t[4]=[l("div",{class:"loading-spinner"},null,-1)]))),l("img",{class:r(["prize-image",{"keep-it-animation":b.value,"quick-sell-animation":y.value,loaded:C.value[0],hidden:!C.value[0]&&!T.value[0]}]),src:x(e.prize),alt:"Prize Item",onLoad:t[0]||(t[0]=e=>_(0)),onError:t[1]||(t[1]=a=>S(0,x(e.prize)))},null,42,mt),T.value[0]?(s(),i("img",gt)):d("",!0),l("div",ft,[l("div",ht,[v(ot,{size:"small"})]),l("div",wt,p(E(e.prize)),1)]),y.value?(s(),i("div",bt,[(s(!0),i(m,null,g(k.value,(e=>(s(),i("div",{key:e.id,class:"flying-coin",style:f({left:e.left,animationDelay:e.delay+"s",width:e.size,height:e.size,animationDuration:e.speed})},[v(ot,{size:"small"})],4)))),128))])):d("",!0)]))],2))}},[["__scopeId","data-v-5038a911"]]),Nt={class:"roulette-container"},Dt=["src"],Ft={class:"hint"},Rt={class:"coin-wrapper"},Ut={class:"price"},Lt={key:1,class:"tab-item placeholder"},Bt={key:0,class:"error-text"},zt=q({__name:"CaseRoulette",props:{items:{type:Array,required:!0,default:()=>[]},winningItemId:{type:Number,default:null},animationDuration:{type:Number,default:7},isSpinning:{type:Boolean,default:!1},isBlackCase:{type:Boolean,default:!1}},emits:["spinComplete"],setup(e,{expose:a,emit:u}){const w=e,b=u,y=o(0),k=o(!1),C=o(!1),T=o(!1),A=o(null),_=o(null);let S=null,I=null;const x=t((()=>{if(!w.items||!Array.isArray(w.items)||0===w.items.length)return[];const e=[];for(let a=0;a<10;a++)e.push(...w.items);return e})),E=t((()=>w.winningItemId&&w.items&&Array.isArray(w.items)&&0!==w.items.length&&w.items.find((e=>e&&e.id===w.winningItemId))||null)),O=()=>{k.value||(M(),x.value&&0!==x.value.length?(k.value=!0,T.value=!1,y.value=20,C.value=!0,S=setTimeout((()=>{k.value&&(C.value=!1,k.value=!1,b("spinComplete",E.value))}),1e3*(w.animationDuration+2)),setTimeout((()=>{_.value&&_.value.offsetWidth;const e=(()=>{if(!E.value)return Math.floor(200*Math.random())+100;if(!x.value||0===x.value.length)return 100;const e=[];return x.value.forEach(((a,t)=>{a&&a.id===w.winningItemId&&e.push(t)})),0===e.length?100:130*(e.find((e=>e>50))||e[0])+30+(Math.floor(70*Math.random())+1)})();y.value=e;const a=Date.now(),t=()=>{const e=(Date.now()-a)/1e3;if(e>w.animationDuration&&C.value)return C.value=!1,k.value=!1,void b("spinComplete",E.value);k.value&&e<w.animationDuration+2&&(I=setTimeout(t,1e3))};I=setTimeout(t,1e3),setTimeout((()=>{C.value=!1,k.value=!1,setTimeout((()=>{b("spinComplete",E.value),M()}),300)}),1e3*w.animationDuration)}),300)):b("spinComplete",null))},M=()=>{S&&(clearTimeout(S),S=null),I&&(clearTimeout(I),I=null)};return c((()=>w.isSpinning),(e=>{e&&!k.value&&O()}),{immediate:!1}),h((()=>{M()})),a({startSpin:O,resetRoulette:()=>{M(),k.value=!1,C.value=!1,y.value=0,T.value=!1},clearAllTimeouts:M}),(a,t)=>(s(),i("div",{class:"roulette-wrapper",ref_key:"rouletteContainer",ref:A},[l("div",Nt,[t[1]||(t[1]=l("div",{class:"bg"},null,-1)),l("div",{class:"items-container",ref_key:"itemsContainer",ref:_,style:f({transform:`translate(-50%, -50%) translateX(-${y.value}px)`,transitionProperty:C.value?"transform":"none",transitionDuration:`${e.animationDuration}s`,transitionTimingFunction:"cubic-bezier(0.05, 0.1, 0.3, 1.0)"})},[x.value&&x.value.length>0?(s(!0),i(m,{key:0},g(x.value,((e,a)=>(s(),i("div",{key:`item-${e&&e.id?e.id:a}-${a}`,class:r(["tab-item",{black_backdrop:w.isBlackCase}])},[l("img",{class:"item-image",src:e&&e.image?e.image:"/images/placeholder.png",alt:"Item",loading:"lazy"},null,8,Dt),l("div",Ft,[l("div",Rt,[v(ot,{size:"small"})]),l("div",Ut,p(e&&e.price?e.price:"0"),1)])],2)))),128)):(s(),i("div",Lt,[t[0]||(t[0]=l("div",{class:"loading-placeholder"},null,-1)),T.value?(s(),i("div",Bt,"Loading error")):d("",!0)]))],4),t[2]||(t[2]=n('<div class="shadow-l" data-v-76cf116b></div><div class="shadow-r" data-v-76cf116b></div><div class="pointers-container" data-v-76cf116b><img src="/images/effects/Union.svg" class="union-top" alt="" data-v-76cf116b><img src="/images/effects/Union.svg" class="union-bottom" alt="" data-v-76cf116b></div>',3))])],512))}},[["__scopeId","data-v-76cf116b"]]),Wt={class:"modal"},jt={class:"case-1"},$t={key:0,class:"api-error-container"},qt={class:"api-error"},Ht={key:1,class:"loading-container"},Gt={class:"loading-text"},Jt={class:"action-buttons"},Vt=["disabled"],Kt=["disabled"],Yt={class:"button-label"},Qt=["disabled"],Xt={class:"button-label"},Zt={class:"price-tag"},es={class:"price-value"},as={class:"coin-small"},ts={key:0,class:"mode-toggle-container"},ss={class:"tabs"},is={key:1,class:"free-case-container"},ls={key:0,class:"promo-error-container"},ns={class:"promo-error"},rs={key:1,class:"checking-promo-container"},os={class:"free-case-form"},cs={class:"promo-input-container"},us=["disabled"],ds=["disabled"],vs={class:"price-tag"},ps={class:"coin-small"},ms={key:2,class:"insufficient-funds-container"},gs={class:"multiplier-selector"},fs={class:"action-buttons",style:{marginTop:"0",transition:"margin-top 0.3s cubic-bezier(0.23, 1, 0.32, 1)"}},hs=["disabled"],ws={class:"price-tag"},bs={class:"price-value"},ys={class:"coin-small"},ks=["disabled"],Cs={class:"price-tag"},Ts={class:"price-value"},As={class:"coin-small"},_s={key:4,class:"prizes-section"},Ss={class:"prizes-grid"},Is=["src"],xs={class:"hint prize-hint"},Es={class:"coin-wrapper"},Os={class:"price"},Ms={__name:"CaseModal",props:{isOpen:{type:Boolean,default:!1},caseNumber:{type:Number,default:1}},emits:["close"],setup(e,{emit:n}){const E=e,O=n,M=a(),P=w("userStore"),N=o(1),D=o(!1),F=o(0),R=o(!0);let U=o(null);const L=o(!1);let B=null,z=null;const W=o(""),j=o(0),$=o(""),q=o(!1),H=o(null);b((()=>{y((()=>{H.value&&(H.value.addEventListener("touchstart",G,{passive:!1}),H.value.addEventListener("touchend",J,{passive:!1}),H.value.addEventListener("mouseup",V))}))}));const G=e=>{e.preventDefault(),Ne({type:"touchstart"})},J=e=>{e.preventDefault(),Ne({type:"touchend"})},V=e=>{Ne({type:"mouseup"})};h((()=>{window.turnstile&&U.value&&window.turnstile.remove(U.value),H.value&&(H.value.removeEventListener("touchstart",G),H.value.removeEventListener("touchend",J),H.value.removeEventListener("mouseup",V))}));const K=t((()=>22===E.caseNumber)),Y=t((()=>!!D.value||P.canAfford(2*j.value))),Q=t((()=>!!D.value||P.canAfford(3*j.value))),X=t((()=>!!D.value||P.canAfford(j.value))),Z=t((()=>0===j.value)),ee=o(""),ae=o(""),te=o(!1),se=o(!1),ie=o(!1),le=o(!1),ne=o(null),re=o(7),oe=o(!1),ce=o(!1),ue=o(!1),de=o(null),ve=o(!1),pe=o([]),me=o([]),ge=o([]),fe=o([]),he=o(null),we=o(1),be=o({1:[],2:[],3:[]}),ye=t((()=>K.value?1:N.value)),ke=o([]),Ce=o(!0),Te=t((()=>fe.value.length>0&&fe.value.every((e=>e))));c((()=>N.value),((e,a)=>{var t;we.value=a||1;const s=K.value?1:e;ge.value=new Array(s).fill(!1),fe.value=new Array(s).fill(!1),pe.value=[];const i=[];for(let l=0;l<s;l++)if(l<((null==(t=me.value)?void 0:t.length)||0))i.push(me.value[l]);else{const a=K.value?1:e;i.push(be.value[a][l]||[])}me.value=i}),{immediate:!0}),c(Te,(e=>{e&&le.value&&(le.value=!1,ie.value=!0)}),{immediate:!0});const Ae=e=>{if(!e||!Array.isArray(e)||0===e.length)return[];const a=[...e];for(let t=a.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1)+.8*Math.random());[a[t],a[e]]=[a[e],a[t]]}return a},_e=async e=>{z&&(clearTimeout(z),z=null),z=setTimeout((()=>{Ce.value=!1,de.value="Timeout loading case data. Please try again.",me.value=new Array(ye.value).fill().map(((e,a)=>Array(10).fill().map(((e,t)=>({id:t+1+1e3*a,name:"Timeout Error",image:"/images/placeholder.png",price:"0"})))))}),1e4),B&&B.abort(),B=new AbortController;const a=B.signal;Ce.value=!0,de.value=null;try{const t=(await rt.get(`/api/load_skins.php?id=${e}`,{withCredentials:!0,signal:a})).data;if(!(t&&t.case&&t.skins&&Array.isArray(t.skins)))throw new Error("Wrong answer from API, please reload the APP");if(W.value=t.case.title||"Case",j.value=t.case.price||0,$.value=t.case.image||"",q.value=!0===t.case.is_black,22===e){const e=t.skins.filter((e=>e&&e.name&&e.img&&void 0!==e.price));ke.value=e.map(((e,a)=>({id:a+1,name:e.name,image:e.img,price:e.price,originalData:e})))}else{const e=t.skins.filter((e=>e&&e.name&&e.img&&e.price));ke.value=e.map(((e,a)=>({id:a+1,name:e.name,image:e.img,price:e.price,originalData:e})))}if(0===ke.value.length)throw new Error("Case is not available.");(()=>{if(ke.value&&0!==ke.value.length){for(let e=1;e<=3;e++){be.value[e]=new Array(e).fill().map((()=>[]));const a=[];for(let t=0;t<e;t++){if(t<a.length){be.value[e][t]=a[t];continue}let s=[];ke.value.forEach((e=>{const a=parseFloat(e.price)||0;let i=1;i=a<10?5:a<50?3:a<100?2:1;for(let l=0;l<i;l++)s.push({id:s.length+1+1e3*t,name:e.name,image:e.image,price:e.price,originalData:e.originalData})})),s=Ae(s);const i=[],l=50;for(;i.length<l;){const e=Math.floor(5*Math.random())+3,a=Math.min(Math.floor(Math.random()*(s.length-e)),s.length-e-1),t=Math.max(0,a),l=Math.min(e,s.length-t);l>0&&s.slice(t,t+l).forEach((e=>{e&&e.id&&i.push(e)})),s=s.length<10?[...s,...s]:Ae(s)}be.value[e][t]=i,a[t]=i}}me.value=be.value[ye.value]||[]}})()}catch(t){if("AbortError"===t.name)return;de.value=t.message||"Failed to load case data. Please try again.",me.value=new Array(ye.value).fill().map(((e,a)=>Array(10).fill().map(((e,t)=>({id:t+1+1e3*a,name:"Error",image:"/images/placeholder.png",price:"0"})))))}finally{B&&B.signal===a&&(B=null),z&&(clearTimeout(z),z=null),Ce.value=!1,L.value=!1}},Se=async(e,a=!1,t=1)=>{var s,i;try{if(ve.value=!0,de.value=null,D.value){if(await new Promise((e=>setTimeout(e,300+700*Math.random()))),22===e&&Math.random()<.3)return{success:!0,winningItems:[],isUnlucky:!0};const a=((e=1)=>{if(!ke.value||0===ke.value.length)return[];const a=[...ke.value].sort(((e,a)=>parseFloat(a.price)-parseFloat(e.price))),t=a.slice(0,3),s=a.filter((e=>parseFloat(e.price)>j.value&&!t.includes(e))),i=a.filter((e=>parseFloat(e.price)<=j.value)),l=[];for(let n=0;n<e;n++){if(Math.random()<.4)if(Math.random()<.33&&t.length>0){const e=Math.floor(Math.random()*t.length);l.push({...t[e]})}else if(s.length>0){const e=Math.floor(Math.random()*s.length);l.push({...s[e]})}else{const e=Math.floor(Math.random()*a.length);l.push({...a[e]})}else if(i.length>0){const e=Math.floor(Math.random()*i.length);l.push({...i[e]})}else{const e=Math.floor(Math.random()*a.length);l.push({...a[e]})}l[n].id=Date.now()+n}return l})(t);return{success:!0,winningItems:a.map((e=>({id:e.id,name:e.name,img:e.image,price:e.price,originalData:e}))),winningItem:a[0]?{id:a[0].id,name:a[0].name,img:a[0].image,price:a[0].price}:null}}const s=a?`/api/open_case.php?q=${e}&type=1&num=${t}`:`/api/open_case.php?q=${e}&num=${t}`,i=await rt.get(s,{withCredentials:!0});return 22===e&&"good"===i.data.status&&i.data.win&&0===i.data.win.length?{success:!0,winningItems:[],isUnlucky:!0}:"good"===i.data.status&&i.data.win&&i.data.win.length>0?{success:!0,winningItems:i.data.win,winningItem:i.data.win[0]}:i.data.error?(de.value=i.data.error,{success:!1,error:i.data.error}):(de.value="Something went wrong, please try again later.",{success:!1,error:"Something went wrong, please try again later."})}catch(l){const e=(null==(i=null==(s=l.response)?void 0:s.data)?void 0:i.error)||"An error occurred, please try again later.";return de.value=e,{success:!1,error:e}}finally{ve.value=!1}};c([()=>P.balance,()=>j.value],(()=>{3!==N.value||Q.value?2!==N.value||Y.value||(N.value=1):N.value=Y.value?2:1})),c([()=>E.isOpen,()=>E.caseNumber],(([e,a])=>{e&&!L.value?(L.value=!0,De(),N.value=1,setTimeout((()=>{_e(a)}),100)):e||(B&&(B.abort(),B=null),L.value=!1)}),{immediate:!0});const Ie=async()=>{if(!D.value){if(!X.value&&!Z.value)return;if(!Z.value&&!P.canAfford(j.value*N.value))return void(de.value="Not enough funds for multiple cases")}if(!ie.value&&!le.value){D.value&&await new Promise((e=>setTimeout(e,100)));try{if(!me.value.every((e=>e&&Array.isArray(e)&&e.length>0))){await _e(E.caseNumber);if(me.value.some((e=>!e||!Array.isArray(e)||0===e.length)))throw new Error("Problem with loading case...")}const e=await Se(E.caseNumber,!0,N.value);if(!e.success)return;const a=e.winningItems;if(Z.value||D.value||P.subtractFromBalance(j.value*N.value),22===E.caseNumber&&e.isUnlucky)return ne.value=[],void(ie.value=!0);let t=[];if(1===N.value){const e=a[0];t=[{id:Date.now(),name:e.name||"Item",image:e.img||"/images/placeholder.png",price:e.price||"0",originalData:e}]}else t=a.map(((e,a)=>({id:Date.now()+a,name:e.name||"Item",image:e.img||"/images/placeholder.png",price:e.price||"0",originalData:e})));const s=t[0];for(let i=0;i<ye.value;i++){let e,a=JSON.parse(JSON.stringify(me.value[i]));e=Array.isArray(t)&&t.length>i?t[i]:t[0]||s;const l=23;if(l<a.length)a[l]={...e,id:e.id};else{a[Math.floor(a.length/2)]={...e,id:e.id}}me.value[i]=a}ne.value=1===N.value?t[0]:t,ue.value=a.some((e=>!0===e.is_balance)),ge.value=new Array(ye.value).fill(!0),fe.value=new Array(ye.value).fill(!1),le.value=!0}catch(e){de.value=e.message||"Failed to start the case opening. Please try again."}}},xe=async()=>{var e,a;if(ae.value="",te.value=!1,!ee.value.trim())return ae.value="Please enter a secret code",void(te.value=!0);if(ee.value.trim().length<3)return ae.value="Invalid secret code",void(te.value=!0);try{ve.value=!0,se.value=!0;const e=new Promise((e=>{if(!window.turnstile)throw new Error("Security service is not available. Please try again later.");U.value=window.turnstile.render("#cf-turnstile-container",{sitekey:"0x4AAAAAABPa5QxbwE8MAEq1",callback:a=>{e(a)},size:"invisible"})})),a=await e,t=await rt.post("/api/activate_free_case.php",{promocode:ee.value.trim(),cf_secure:a},{withCredentials:!0});window.turnstile&&U.value&&window.turnstile.reset(U.value),t.data.success?(await new Promise((e=>setTimeout(e,400))),await Ie()):(ae.value=t.data.error||"Invalid secret code",te.value=!0)}catch(t){ae.value=(null==(a=null==(e=t.response)?void 0:e.data)?void 0:a.error)||"Error activating the case. Please try again.",te.value=!0}finally{se.value=!1,ve.value=!1}},Ee=()=>{window.open("https://t.me/case","_blank")},Oe=()=>{oe.value||ce.value||(oe.value=!0,he.value&&he.value.animateKeepIt(),setTimeout((()=>{oe.value=!1,De(),N.value=1,_e(E.caseNumber).catch((e=>{}))}),1500))},Me=async()=>{var e,a,t;if(oe.value||ce.value)return;let s=!1,i=0;if(D.value)s=!0,i=Array.isArray(ne.value)?ne.value.reduce(((e,a)=>e+parseFloat(a.price||0)),0):parseFloat((null==(e=ne.value)?void 0:e.price)||0);else try{if(Array.isArray(ne.value)){const e=ne.value.map((e=>{var a;return null==(a=e.originalData)?void 0:a.id})).filter((e=>e));if(0===e.length)throw new Error("No valid item IDs found");const a=await rt.post("/api/sell_group_drop.php",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}});a.data.error?(de.value=a.data.error,s=!1):!0===a.data.status&&a.data.total_price&&(s=!0,i=parseFloat(a.data.total_price))}else{const e=null==(t=null==(a=ne.value)?void 0:a.originalData)?void 0:t.id;if(!e)throw new Error("Item ID not found");const l=await rt.get(`/api/change_drop_status.php?id=${e}&status=sell`,{withCredentials:!0});l.data.error?(de.value=l.data.error,s=!1):!0===l.data.status&&l.data.price&&(s=!0,i=parseFloat(l.data.price))}}catch(l){de.value=l.message||"Error selling item(s). Please try again.",s=!1}s&&(ce.value=!0,he.value&&he.value.animateQuickSell(),isNaN(i)||D.value||P.addToBalance(i)),s?setTimeout((()=>{ce.value=!1,De(),N.value=1,_e(E.caseNumber).catch((e=>{}))}),1500):ce.value=!1};let Pe=0;const Ne=e=>{if(e||(e={type:"unknown"}),"touchend"===e.type)Pe=Date.now(),e.preventDefault&&e.preventDefault();else if("click"===e.type&&Date.now()-Pe<300)return;D.value=!0,F.value+=1,5===F.value||10===F.value||F.value,F.value>=20&&(R.value=!1)},De=()=>{le.value=!1,ge.value=new Array(ye.value).fill(!1),fe.value=new Array(ye.value).fill(!1),ie.value=!1,ne.value=null,de.value=null,ae.value="",te.value=!1,ee.value="",se.value=!1,ue.value=!1,window.turnstile&&U.value&&window.turnstile.reset(U.value),pe.value.forEach((e=>{e&&e.resetRoulette()}))},Fe=()=>{B&&(B.abort(),B=null),z&&(clearTimeout(z),z=null),De(),window.turnstile&&U.value&&window.turnstile.reset(U.value),oe.value=!1,ce.value=!1,L.value=!1,D.value=!1,F.value=0,R.value=!0,O("close"),setTimeout((()=>{me.value=new Array(ye.value).fill().map((()=>[]))}),500)},Re=()=>{B&&(B.abort(),B=null),L.value=!1,Ce.value=!1,_e(E.caseNumber)},Ue=()=>{Fe(),M.push("/profile?openDeposit=true")},Le=()=>{Fe(),M.push("/upgrade")};return(a,t)=>(s(),k(T,{name:"modal-fade"},{default:C((()=>{var a;return[e.isOpen?(s(),i("div",{key:0,class:"modal-overlay",onClick:_(Fe,["self"])},[l("div",Wt,[t[37]||(t[37]=l("div",{id:"cf-turnstile-container",style:{display:"none"}},null,-1)),l("div",jt,p(W.value),1),de.value?(s(),i("div",$t,[l("div",qt,[u(p(de.value)+" ",1),l("button",{class:"reload-button",onClick:Re},"Reload")])])):d("",!0),Ce.value||ve.value?(s(),i("div",Ht,[t[13]||(t[13]=l("div",{class:"loading-spinner"},null,-1)),l("div",Gt,p(ve.value?"Opening case...":"Loading case data..."),1)])):ie.value?(s(),i(m,{key:2},[v(Pt,{ref_key:"winRef",ref:he,prize:ne.value,caseNumber:e.caseNumber,"is-black-case":q.value},null,8,["prize","caseNumber","is-black-case"]),l("div",Jt,[K.value&&(!ne.value||Array.isArray(ne.value)&&0===ne.value.length)?(s(),i("button",{key:0,class:"spin-button full-width-button",onClick:Oe,disabled:oe.value||ce.value},t[14]||(t[14]=[l("div",{class:"button-label"},"Open Again",-1)]),8,Vt)):(s(),i(m,{key:1},[l("button",{class:"spin-button",onClick:Oe,disabled:oe.value||ce.value},[l("div",Yt,p(Array.isArray(ne.value)&&ne.value.length>1?"Keep it All":"Keep it"),1)],8,Kt),ue.value?d("",!0):(s(),i("button",{key:0,class:"quick-spin-button",onClick:Me,disabled:oe.value||ce.value},[l("div",Xt,p(Array.isArray(ne.value)&&ne.value.length>1?"Quick Sell All":"Quick Sell"),1),l("div",Zt,[l("div",es,p(Array.isArray(ne.value)?ne.value.reduce(((e,a)=>e+parseFloat(a.price||0)),0).toFixed(2):null==(a=ne.value)?void 0:a.price),1),l("div",as,[v(ot,{size:"small"})])])],8,Qt)),ue.value?d("",!0):(s(),i("button",{key:1,class:"upgrade-button",onClick:Le},t[15]||(t[15]=[l("div",{class:"button-label"},"Upgrade",-1)])))],64))])],64)):(s(),i(m,{key:3},[l("div",{class:r(["roulettes-container",`multiplier-${N.value}`])},[v(A,{name:N.value>we.value?"roulette-fade":"roulette-none",tag:"div",class:"roulettes-transition-group"},{default:C((()=>[(s(!0),i(m,null,g(me.value,((e,a)=>{var t,l;return s(),i("div",{key:`roulette-${a}`,class:r(["roulette-wrapper",{"roulette-overlap":a>0,"first-roulette":0===a,"last-roulette":a===me.value.length-1}]),style:f({zIndex:me.value.length-a,marginTop:a>0?"-20px":"0",transitionDelay:N.value>we.value?.08*a+"s":"0s"})},[v(zt,{ref_for:!0,ref:e=>{e&&(pe.value[a]=e)},items:e,"winning-item-id":Array.isArray(ne.value)?null==(t=ne.value[a])?void 0:t.id:null==(l=ne.value)?void 0:l.id,"animation-duration":re.value,"is-spinning":ge.value[a],"is-black-case":q.value,onSpinComplete:e=>{return(t=a)>=0&&t<fe.value.length&&(ge.value[t]=!1,fe.value[t]=!0),void(Te.value&&ue.value&&!D.value&&setTimeout((()=>{let e=0;Array.isArray(ne.value)?ne.value.forEach((a=>{a.originalData&&!0===a.originalData.is_balance&&(e+=parseFloat(a.price||0))})):ne.value&&ne.value.originalData&&!0===ne.value.originalData.is_balance&&(e=parseFloat(ne.value.price||0)),e>0&&P.addToBalance(e)}),300));var t}},null,8,["items","winning-item-id","animation-duration","is-spinning","is-black-case","onSpinComplete"])],6)})),128))])),_:1},8,["name"])],2),Z.value||K.value||le.value||ie.value||!R.value?d("",!0):(s(),i("div",ts,[l("div",ss,[l("div",{class:r(["tab-segment",{active:!D.value}]),onClick:t[0]||(t[0]=_((e=>D.value=!1),["prevent"])),onTouchend:t[1]||(t[1]=_((e=>D.value=!1),["prevent"]))},t[16]||(t[16]=[l("div",{class:"text"},"Real",-1)]),34),l("div",{class:r(["tab-segment2",{active:D.value}]),onClick:_(Ne,["prevent"]),onTouchend:_(Ne,["prevent"]),onTouchstart:_(Ne,["prevent"]),ref_key:"demoButton",ref:H},t[17]||(t[17]=[l("div",{class:"text"},"Demo",-1)]),34)])])),Z.value?(s(),i("div",is,[te.value?(s(),i("div",ls,[l("div",ns,p(ae.value),1)])):d("",!0),se.value?(s(),i("div",rs,t[18]||(t[18]=[l("div",{class:"checking-promo-message"},"Checking promocode...",-1)]))):d("",!0),t[22]||(t[22]=l("div",{class:"free-case-info"},[l("div",{class:"info-icon-container"},[l("img",{src:"/images/actions/info.svg",alt:"Info",class:"info-svg"})]),l("div",{class:"free-case-text"},"To open this case, enter the secret code")],-1)),l("div",os,[l("div",cs,[S(l("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>ee.value=e),type:"text",placeholder:"Secret Code",class:"promo-input",disabled:se.value},null,8,us),[[I,ee.value]])]),l("button",{class:"free-case-button",onClick:xe,disabled:le.value||ve.value||L.value||se.value},[t[20]||(t[20]=l("div",{class:"button-label"},"Spin",-1)),l("div",vs,[t[19]||(t[19]=l("div",{class:"price-value"},"0",-1)),l("div",ps,[v(ot,{size:"small"})])])],8,ds)]),l("div",{class:"free-case-help"},[t[21]||(t[21]=l("span",{class:"free-case-help-text"},"Search for secret codes in ",-1)),l("span",{class:"free-case-telegram",onClick:Ee},"@case")])])):X.value?(s(),i(m,{key:3},[l("div",gs,[l("div",{class:r(["multiplier-tabs",{"case22-tabs":K.value}])},[K.value?(s(),i(m,{key:1},[l("div",{class:r(["multiplier-tab",{active:1===N.value,disabled:le.value}]),onClick:t[6]||(t[6]=e=>le.value?null:N.value=1)},t[28]||(t[28]=[l("div",{class:"multiplier-text"},"x1",-1)]),2),l("div",{class:r(["multiplier-tab",{active:10===N.value,disabled:!x(P).canAfford(10*j.value.value)||le.value}]),onClick:t[7]||(t[7]=e=>!x(P).canAfford(10*j.value.value)||le.value?null:N.value=10)},t[29]||(t[29]=[l("div",{class:"multiplier-text"},"x10",-1)]),2),l("div",{class:r(["multiplier-tab",{active:50===N.value,disabled:!x(P).canAfford(50*j.value.value)||le.value}]),onClick:t[8]||(t[8]=e=>!x(P).canAfford(50*j.value.value)||le.value?null:N.value=50)},t[30]||(t[30]=[l("div",{class:"multiplier-text"},"x50",-1)]),2),l("div",{class:r(["multiplier-tab",{active:100===N.value,disabled:!x(P).canAfford(100*j.value.value)||le.value}]),onClick:t[9]||(t[9]=e=>!x(P).canAfford(100*j.value.value)||le.value?null:N.value=100)},t[31]||(t[31]=[l("div",{class:"multiplier-text"},"x100",-1)]),2),l("div",{class:r(["multiplier-tab",{active:1e3===N.value,disabled:!x(P).canAfford(1e3*j.value.value)||le.value}]),onClick:t[10]||(t[10]=e=>!x(P).canAfford(1e3*j.value.value)||le.value?null:N.value=1e3)},t[32]||(t[32]=[l("div",{class:"multiplier-text"},"x1000",-1)]),2)],64)):(s(),i(m,{key:0},[l("div",{class:r(["multiplier-tab",{active:1===N.value,disabled:le.value}]),onClick:t[3]||(t[3]=e=>le.value?null:N.value=1)},t[25]||(t[25]=[l("div",{class:"multiplier-text"},"x1",-1)]),2),l("div",{class:r(["multiplier-tab",{active:2===N.value,disabled:!Y.value||le.value}]),onClick:t[4]||(t[4]=e=>!Y.value||le.value?null:N.value=2)},t[26]||(t[26]=[l("div",{class:"multiplier-text"},"x2",-1)]),2),l("div",{class:r(["multiplier-tab",{active:3===N.value,disabled:!Q.value||le.value}]),onClick:t[5]||(t[5]=e=>!Q.value||le.value?null:N.value=3)},t[27]||(t[27]=[l("div",{class:"multiplier-text"},"x3",-1)]),2)],64))],2)]),l("div",fs,[K.value?d("",!0):(s(),i("button",{key:0,class:"spin-button",onClick:t[11]||(t[11]=e=>Ie()),disabled:le.value||ve.value||L.value},[t[33]||(t[33]=l("div",{class:"button-label"},"Spin",-1)),l("div",ws,[l("div",bs,p((j.value*N.value).toFixed(2)),1),l("div",ys,[v(ot,{size:"small"})])])],8,hs)),l("button",{class:"quick-spin-button",onClick:t[12]||(t[12]=e=>(async()=>{if((D.value||X.value)&&!ie.value&&!le.value){D.value&&await new Promise((e=>setTimeout(e,100)));try{const e=await Se(E.caseNumber,!1,N.value);if(!e.success)return;const a=e.winningItems;if(D.value||P.subtractFromBalance(j.value*N.value),22===E.caseNumber&&e.isUnlucky)return ne.value=[],void(ie.value=!0);if(1===N.value){const e=a[0];ne.value={id:Date.now(),name:e.name,image:e.img,price:e.price,originalData:e}}else ne.value=a.map((e=>({id:Date.now()+1e3*Math.random(),name:e.name,image:e.img,price:e.price,originalData:e})));ue.value=a.some((e=>!0===e.is_balance)),ie.value=!0,ue.value&&!D.value&&setTimeout((()=>{let e=0;Array.isArray(ne.value)?ne.value.forEach((a=>{a.originalData&&!0===a.originalData.is_balance&&(e+=parseFloat(a.price||0))})):ne.value&&ne.value.originalData&&!0===ne.value.originalData.is_balance&&(e=parseFloat(ne.value.price||0)),e>0&&P.addToBalance(e)}),300)}catch(e){de.value="Failed to open the case. Please try again."}}})()),disabled:le.value||ve.value||L.value},[t[34]||(t[34]=l("div",{class:"button-label"},"Quick Spin",-1)),l("div",Cs,[l("div",Ts,p((j.value*N.value).toFixed(2)),1),l("div",As,[v(ot,{size:"small"})])])],8,ks)])],64)):(s(),i("div",ms,[t[24]||(t[24]=l("div",{class:"insufficient-funds-message"},[l("div",{class:"info-icon-container"},[l("img",{src:"/images/actions/info.svg",alt:""})]),l("div",{class:"insufficient-funds-text"},"Not enough funds")],-1)),l("button",{class:"deposit-button",onClick:Ue},t[23]||(t[23]=[l("div",{class:"button-label"},"Deposit",-1)]))]))],64)),l("button",{class:"close-button",onClick:Fe},t[35]||(t[35]=[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18M6 6L18 18",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),Ce.value||ve.value?d("",!0):(s(),i("div",_s,[t[36]||(t[36]=l("div",{class:"prizes-title"},"Possible prizes:",-1)),l("div",Ss,[(s(!0),i(m,null,g(ke.value,(e=>(s(),i("div",{key:e.id,class:r(["prize-item",{black_backdrop:q.value}])},[l("img",{class:"prize-image",src:e.image,alt:"Prize"},null,8,Is),l("div",xs,[l("div",Es,[v(ot,{size:"small"})]),l("div",Os,p(e.price),1)])],2)))),128))])]))])])):d("",!0)]})),_:1}))}},Ps=q(Ms,[["__scopeId","data-v-1f7c6b75"]]),Ns={setCookie(e,a,t={}){if((t={path:"/",secure:!0,sameSite:"None",expires:365,...t}).expires){const e=new Date;e.setTime(e.getTime()+24*t.expires*60*60*1e3),t.expires=e.toUTCString()}let s=`${encodeURIComponent(e)}=${encodeURIComponent(a)}`;for(const[i,l]of Object.entries(t))!0===l?s+=`; ${i}`:!1!==l&&(s+=`; ${i}=${l}`);return document.cookie=s,!0},getCookie(e){const a=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return a?decodeURIComponent(a[1]):null},deleteCookie(e){this.setCookie(e,"",{expires:-1})}};const Ds=new class{constructor(){this.isInitialized=!1,this.isAuthenticated=!1,this.error=null,this.user=null,this.baseUrl="/api",rt.defaults.withCredentials=!0}async initialize(){try{const e=await this.validateWithCookie();if(e.success)return this.isInitialized=!0,this.isAuthenticated=!0,this.user=e.user,{success:!0,user:this.user};let a=null;if(window.Telegram&&window.Telegram.WebApp&&(a=window.Telegram.WebApp.initData),a||(a=localStorage.getItem("telegram_init_data")),!a)throw new Error("No Telegram initialization data available");const t=await rt.post(`case-bot.com/api/telegram_auth.php`,{initData:a},{withCredentials:!0});if(t.data.status){const e=t.data.verification;return Ns.setCookie("s",e,{expires:30,path:"/",secure:!0,sameSite:"None"}),this.user=t.data.user,localStorage.setItem("telegram_init_data",a),this.isInitialized=!0,this.isAuthenticated=!0,{success:!0,user:this.user}}throw this.error=t.data.error||"Authentication failed",new Error(this.error)}catch(e){return this.error=e.message||"Authentication failed",{success:!1,error:this.error}}}async validateWithCookie(){try{const e=await rt.post(`case-bot.com/api/telegram_auth.php`,{},{withCredentials:!0});return e.data.status&&e.data.user?{success:!0,user:e.data.user}:{success:!1,error:e.data.error||"Cookie validation failed"}}catch(e){return{success:!1,error:e.message||"Cookie validation error"}}}getUser(){return this.user}isUserAuthenticated(){return this.isAuthenticated}},Fs={class:"loader-container"},Rs={key:0,class:"maintenance-container"},Us={class:"maintenance-content"},Ls={class:"maintenance-alert"},Bs={key:1,class:"loader-content"},zs={key:2,class:"error-container"},Ws={class:"error-message"},js={key:3,class:"loading-spinner-container"},$s={class:"loading-text"};const qs=q({name:"TelegramLoader",props:{triggerReady:{type:Function,required:!0},referralCode:{type:String,default:null}},emits:["auth-complete","auth-error"],setup(e,{emit:a}){const t=w("userStore"),s=o(null),i=o(!0),l=o("Connecting to Telegram..."),n=o(0),r=o(!1),u=o(!1);c((()=>e.referralCode),(e=>{e&&(r.value=!0)}),{immediate:!0});const d=async()=>{try{s.value=null,i.value=!0,l.value="Connecting to Telegram...",await new Promise((e=>setTimeout(e,300))),l.value="Authenticating...";try{const e=await rt.post("case-bot.com/api/telegram_auth.php",{},{withCredentials:!0});if(e.data&&!1===e.data.status&&"technical work"===e.data.state)return u.value=!0,void(i.value=!1)}catch(t){}const o=await Ds.initialize();if(o.success&&o.user){if(l.value="Authentication successful",r.value&&e.referralCode){l.value="Processing referral...";try{await v(o.user)}catch(n){}}await p(o.user),a("auth-complete",o.user),setTimeout((()=>{e.triggerReady()}),1)}else s.value=o.error||"Failed to authenticate. Please try again.",i.value=!1,a("auth-error",s.value)}catch(o){s.value=o.message||"An unexpected error occurred. Please try again.",i.value=!1,a("auth-error",s.value)}},v=async a=>{try{return!!(await rt.post("/api/process_referral.php",{userId:a.id,referralCode:e.referralCode},{withCredentials:!0})).data.success}catch(t){throw t}},p=async e=>{e&&t.updateUser({firstName:e.first_name,lastName:e.last_name,photoUrl:e.photo_url,balance:e.balance||0,walletAddress:e.wallet_address||null,telegramId:e.telegram_id})};return b((()=>{d()})),{error:s,isLoading:i,loadingText:l,retryAuthentication:()=>{s.value=null,n.value++,d()},maintenanceMode:u,openTelegramChannel:()=>{window.Telegram&&window.Telegram.WebApp?window.Telegram.WebApp.openTelegramLink("https://t.me/case"):window.open("https://t.me/case","_blank")}}}},[["render",function(e,a,t,r,o,c){return s(),i("div",Fs,[r.maintenanceMode?(s(),i("div",Rs,[l("div",Us,[a[7]||(a[7]=l("div",{class:"logo-container maintenance-logo"},[l("img",{src:"/images/effects/loader.png",alt:"Gift Cases by TON Logo",class:"floating-logo"})],-1)),a[8]||(a[8]=l("h1",{class:"loader-title"},"Gift Cases by TON",-1)),a[9]||(a[9]=l("p",{class:"loader-copyright"},"Copyright  2025",-1)),l("div",Ls,[a[3]||(a[3]=l("div",{class:"alert-icon"},"",-1)),a[4]||(a[4]=l("h2",{class:"maintenance-title"},"Technical Maintenance",-1)),a[5]||(a[5]=l("p",{class:"maintenance-message"},"We're currently performing technical maintenance to improve your experience.",-1)),a[6]||(a[6]=l("p",{class:"maintenance-submessage"},"Please check our news for updates.",-1)),l("button",{class:"telegram-button",onClick:a[0]||(a[0]=(...e)=>r.openTelegramChannel&&r.openTelegramChannel(...e))},a[2]||(a[2]=[l("div",{class:"button-label"},"Open @case",-1)]))])])])):(s(),i("div",Bs,a[10]||(a[10]=[n('<header class="loader-header" data-v-764519fb><div class="logo-container" data-v-764519fb><img src="/images/effects/loader.png" alt="Gift Cases by TON Logo" class="floating-logo" data-v-764519fb></div><h1 class="loader-title" data-v-764519fb>Gift Cases by TON</h1><p class="loader-copyright" data-v-764519fb>Copyright  2025</p></header>',1)]))),r.error&&!r.maintenanceMode?(s(),i("div",zs,[a[11]||(a[11]=l("div",{class:"error-icon"},"",-1)),a[12]||(a[12]=l("h2",{class:"error-title"},"Authentication Error",-1)),l("p",Ws,p(r.error),1),l("button",{class:"retry-button",onClick:a[1]||(a[1]=(...e)=>r.retryAuthentication&&r.retryAuthentication(...e))},"Try Again")])):d("",!0),!r.isLoading||r.error||r.maintenanceMode?d("",!0):(s(),i("div",js,[a[13]||(a[13]=l("div",{class:"loading-spinner"},null,-1)),l("p",$s,p(r.loadingText),1)])),a[14]||(a[14]=l("div",{class:"loader-social-handle"},"@case",-1))])}],["__scopeId","data-v-764519fb"]]),Hs=E({user:{firstName:"",lastName:"",photoUrl:"/images/effects/profile.svg",balance:0,walletAddress:null,telegramId:"",isLoading:!1,error:null,isAuthenticated:!1}}),Gs=e=>{const a=parseFloat(e);return isNaN(a)?0:Math.round(100*a)/100},Js={displayName:t((()=>Hs.user.firstName&&Hs.user.lastName?`${Hs.user.firstName} ${Hs.user.lastName}`:Hs.user.firstName?Hs.user.firstName:"Guest")),telegramId:t((()=>Hs.user.telegramId?`#${Hs.user.telegramId}`:"")),formattedWalletAddress:t((()=>{if(!Hs.user.walletAddress)return null;const e=Hs.user.walletAddress;return e.length<=12?e:`${e.substring(0,5)}...${e.substring(e.length-4)}`})),hasWallet:t((()=>!!Hs.user.walletAddress)),isAuthenticated:t((()=>Hs.user.isAuthenticated)),canAfford:e=>Gs(Hs.user.balance)>=Gs(e),formattedBalance:t((()=>(e=>{const a=parseFloat(e);return isNaN(a)?"0.00":a.toFixed(2)})(Hs.user.balance)))},Vs={updateUser(e){if(e)return void 0!==e.balance&&(e.balance=Gs(e.balance)),Hs.user={...Hs.user,...e,isAuthenticated:!0,error:null},Hs.user},async loadUserData(){Hs.user.isLoading=!0,Hs.user.error=null;try{return await new Promise((e=>setTimeout(e,500))),Hs.user.isLoading=!1,Hs.user}catch(e){throw Hs.user.error=e.message||"Failed to load user data",Hs.user.isLoading=!1,e}},connectWallet:e=>!!e&&(Hs.user.walletAddress=e,!0),disconnectWallet(){Hs.user.walletAddress=null},updateBalance(e){void 0!==e&&(Hs.user.balance=Gs(e))},addToBalance(e){if(void 0!==e){const a=parseFloat(Hs.user.balance)||0,t=parseFloat(e)||0;Hs.user.balance=Gs(a+t)}},subtractFromBalance(e){if(void 0!==e){const a=parseFloat(Hs.user.balance)||0,t=parseFloat(e)||0;if(a>=t)return Hs.user.balance=Gs(a-t),!0}return!1},setError(e){Hs.user.error=e},clearUser(){Hs.user={firstName:"",lastName:"",photoUrl:"/images/effects/profile.svg",balance:0,walletAddress:null,telegramId:"",isLoading:!1,error:null,isAuthenticated:!1}}},Ks={state:O(Hs),...Js,...Vs},Ys=M({name:"App",components:{FooterMenu:G,CaseModal:Ps,TelegramLoader:qs},setup(){a();const e=o(!0),t=o(0),s=o(!1),i=o(1),l=o(null),n=o(null),r=o(null),c=o(null);N("userStore",Ks),N("webSocket",r);const u=o(new Map);N("registerWsHandler",((e,a)=>{u.value.set(e,a)})),N("unregisterWsHandler",(e=>{u.value.delete(e)}));const d=()=>{const e=`${"https:"===window.location.protocol?"wss:":"ws:"}//case-bot.com:8443`;let a=null,s=null;const i=()=>{a&&clearInterval(a),s&&clearTimeout(s),c.value&&clearTimeout(c.value),a=null,s=null,c.value=null},l=()=>{s&&clearTimeout(s),s=setTimeout((()=>{r.value&&r.value.close()}),3e4)};try{r.value=new WebSocket(e),r.value.onopen=()=>{i(),a=setInterval((()=>{r.value&&r.value.readyState===WebSocket.OPEN&&(r.value.send(JSON.stringify({event:"ping"})),l())}),15e3),l(),Ks.isAuthenticated},r.value.onmessage=e=>{try{const a=JSON.parse(e.data);if(l(),"pong"===a.event)return;const t=a.event||a.type;if("balance_update"===t){const e=a.data||{};if(void 0!==e.balance){const a=parseFloat(e.balance);isNaN(a)||Ks.updateBalance(a)}else if(void 0!==e.amount){const a=parseFloat(e.amount);isNaN(a)||(a>=0?Ks.addToBalance(a):Ks.subtractFromBalance(Math.abs(a)))}}if(t&&u.value.has(t)){const e=a.data||("inventory_update"===a.type?a.data:a);u.value.get(t)(e)}"global_notification"===a.event||a.type}catch(a){}},r.value.onerror=e=>{},r.value.onclose=e=>{if(i(),1e3===e.code)return;const a=Math.min(3e4,2e3*Math.pow(1.5,t.value));t.value++,c.value=setTimeout((()=>{d()}),a)}}catch(n){i();const e=Math.min(3e4,2e3*Math.pow(1.5,t.value));t.value++,c.value=setTimeout((()=>{d()}),e)}},v=e=>{if(e)try{const a=new Date;a.setDate(a.getDate()+30),document.cookie=`ref=${e}; expires=${a.toUTCString()}; path=/; SameSite=None; Secure`}catch(a){}},p=e=>{i.value=e,s.value=!0},m=()=>{s.value=!1};N("modalFunctions",{openModal:p,closeModal:m});return D((()=>{(()=>{var e;let a=null;try{if(window.Telegram&&window.Telegram.WebApp){const t=null==(e=window.Telegram.WebApp.initDataUnsafe)?void 0:e.start_param;if(t&&t.startsWith("ref_")&&(a=t.substring(4)),!a&&window.Telegram.WebApp.initData){const e=window.Telegram.WebApp.initData,t=new URLSearchParams(e),s=t.get("start_param")||t.get("startapp");s&&s.startsWith("ref_")&&(a=s.substring(4))}}if(!a){const e=new URLSearchParams(window.location.search),t=e.get("startapp")||e.get("start_param");t&&t.startsWith("ref_")&&(a=t.substring(4))}if(!a){const e=window.location.pathname.match(/\/ref\/([a-zA-Z0-9]+)/);e&&e[1]&&(a=e[1],window.history&&window.history.replaceState&&window.history.replaceState({},document.title,"/"))}return!!a&&(v(a),n.value=a,!0)}catch(t){return!1}})()})),b((()=>{window.Telegram&&window.Telegram.WebApp&&window.Telegram.WebApp.expand()})),F((()=>{r.value&&r.value.close(1e3,"Intentional closure"),c.value&&clearTimeout(c.value)})),{loading:e,isModalOpen:s,selectedCaseNumber:i,openModal:p,closeModal:m,authError:l,handleAuthComplete:e=>{l.value=null,n.value,d()},handleAuthError:e=>{l.value=e},finishLoading:()=>{setTimeout((()=>{e.value=!1}),500)},referralCode:n}}}),Qs={class:"app-container"},Xs={key:1,class:"app-content"};const Zs=q(Ys,[["render",function(e,a,t,l,n,r){const o=P("TelegramLoader"),c=P("router-view"),u=P("FooterMenu"),d=P("CaseModal");return s(),i("div",Qs,[e.loading?(s(),k(o,{key:0,onAuthComplete:e.handleAuthComplete,onAuthError:e.handleAuthError,triggerReady:e.finishLoading,referralCode:e.referralCode},null,8,["onAuthComplete","onAuthError","triggerReady","referralCode"])):(s(),i("div",Xs,[v(c,{onOpenModal:e.openModal},null,8,["onOpenModal"]),v(u),v(d,{"is-open":e.isModalOpen,"case-number":e.selectedCaseNumber,onClose:e.closeModal},null,8,["is-open","case-number","onClose"])]))])}]]),ei={class:"live-status-bar"},ai={class:"live-item-content"},ti=["src"],si=q({__name:"LiveDrop",setup(e,{expose:a}){const t=w("registerWsHandler"),n=w("unregisterWsHandler"),c=o([]),u=new Map;function d(e,a){return`${e}_${a||Date.now()}`}function p(e,a=Date.now(),t=!1){const s=e.startsWith("/")?e:`/${e}`,i=Date.now()+Math.random();c.value.unshift({id:i,src:s,timestamp:a,isBlack:t}),c.value.length>50&&(c.value=c.value.slice(0,50))}const f=e=>{try{let a,t=Date.now(),s=!1;if(e&&e.image)a=e.image,e.timestamp&&(t=e.timestamp),!0===e.is_black&&(s=!0);else if("string"==typeof e)a=e;else if(!e)return;if(!a)return;const i=d(a,t);u.has(i)||(u.set(i,t),u.size>200&&Array.from(u.entries()).sort(((e,a)=>e[1]-a[1])).slice(0,u.size-100).forEach((e=>{u.delete(e[0])})),p(a,t,s))}catch(a){}};window.addLiveDropItem=(e,a=!1)=>(p(e||"images/cases/flowers.png",Date.now(),a),!0),window.testMultipleLiveDrops=(e=10,a=300)=>{const t=["images/cases/helm4x.png","images/cases/flowers.png","images/cases/fen.png","images/cases/cat.png"];let s=0;const i=()=>{if(s<e){const e=t[Math.floor(Math.random()*t.length)],l=Math.random()>.7;window.addLiveDropItem(e,l),s++,setTimeout(i,a)}};return i(),`Sending ${e} items with ${a}ms delay...`};let h=null;return b((()=>{!async function(){try{const e=await rt.get("/api/live.php");if(Array.isArray(e.data)){const a=e.data.reverse().slice(0,50);a.forEach(((e,t)=>{const s=Date.now()-1e3*(a.length-t);p(e,s,!1);const i=d(e,s);u.set(i,s)}))}}catch(e){}}(),t&&t("case_opened",f),h=(()=>{const e=e=>{!e.data||"case_opened"!==e.data.type&&"case_opened"!==e.data.event||(e.data.data?f(e.data.data):"object"==typeof e.data&&f(e.data))};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)})()})),F((()=>{n&&n("case_opened"),h&&h()})),a({addNewItem:p}),(e,a)=>(s(),i("section",ei,[a[0]||(a[0]=l("div",{class:"live-indicator"},[l("div",{class:"live-text"},"Live"),l("div",{class:"live-dot pulse"},"")],-1)),v(A,{name:"live-items-transition",tag:"div",class:"live-items"},{default:C((()=>[(s(!0),i(m,null,g(c.value,((e,a)=>(s(),i("div",{key:e.id,class:r(["live-item",{black_backdrop:e.isBlack}])},[l("div",ai,[l("img",{class:"live-image",src:e.src,alt:"Live Item"},null,8,ti)])],2)))),128))])),_:1})]))}},[["__scopeId","data-v-95231aed"]]),ii=M({name:"CasesList",components:{Coin:ot},data:()=>({cards:[]}),mounted(){this.fetchCases()},methods:{async fetchCases(){try{const e=await rt.get("/api/cases.php",{withCredentials:!0});this.cards=e.data}catch(e){}},openModal(e){this.$emit("open-modal",e.id)},isWebmFile:e=>!!e&&e.toLowerCase().endsWith(".webm"),openTelegram(){window.open("https://t.me/case","_blank")},generateGradientStyle(e){if(!e)return{background:"\n            radial-gradient(61.63% 100.04% at 43.18% 123.86%, rgba(171, 173, 174, 0.40) 0%, rgba(171, 173, 174, 0.00) 100%),\n            linear-gradient(180deg, rgba(20, 20, 21, 0.00) 0%, #141415 100%)\n          "};const a=e.split(",");if(6!==a.length)return{background:"none"};const t=a[0],s=a[1],i=a[2],l=a[3],n=a[4],r=a[5];return{background:`\n          radial-gradient(61.63% 100.04% at 43.18% 123.86%, rgba(${t}, ${s}, ${i}, 0.40) 0%, rgba(${t}, ${s}, ${i}, 0.00) 100%),\n          linear-gradient(180deg, rgba(${l}, ${n}, ${r}, 0.00) 0%, rgb(${l}, ${n}, ${r}) 100%)\n        `}}}}),li={class:"cases-section"},ni={class:"free-case-banner"},ri={class:"cases-grid"},oi=["onClick"],ci={class:"free-case-image-container"},ui=["src"],di={key:0,class:"case-new-badge"},vi={key:1,class:"case-image",autoplay:"",loop:"",muted:"",playsinline:""},pi=["src"],mi=["src"],gi={class:"case-footer"},fi={class:"case-price"};const hi=q(ii,[["render",function(e,a,t,o,c,u){const h=P("Coin");return s(),i("section",li,[l("div",ni,[a[2]||(a[2]=n('<div class="lightning-icon" data-v-c514ea24><img class="lightning-svg" src="/images/effects/Lightning.png?1" data-v-c514ea24></div><div class="banner-content" data-v-c514ea24><div class="coin-wrapper" data-v-c514ea24><img class="coin-svg" src="/images/effects/group-20873288230.svg" data-v-c514ea24></div><div class="banner-text" data-v-c514ea24>Check our news</div></div>',2)),l("button",{class:"telegram-button",onClick:a[0]||(a[0]=(...a)=>e.openTelegram&&e.openTelegram(...a))},a[1]||(a[1]=[l("div",{class:"button-label"},"Open @case",-1)]))]),l("div",ri,[(s(!0),i(m,null,g(e.cards,(t=>(s(),i("div",{key:t.id,class:r(["case-card",{"free-case-card":0===t.price}]),onClick:a=>e.openModal(t)},[0===t.price?(s(),i(m,{key:0},[l("div",ci,[a[3]||(a[3]=l("img",{class:"free-case-text-svg",src:"/images/effects/free_case.svg"},null,-1)),l("img",{class:"free-case-image",src:t.image,alt:"Free Case Image"},null,8,ui)]),a[4]||(a[4]=l("div",{class:"free-case-footer"},[l("div",{class:"free-case-label"},"Free Case")],-1))],64)):(s(),i(m,{key:1},[l("div",{class:r(["case-image-container",{black_backdrop:t.is_black}]),style:f(t.is_black?{}:e.generateGradientStyle(t.colors))},[t.is_new?(s(),i("div",di,a[5]||(a[5]=[l("div",{class:"case-new-label"},"new",-1)]))):d("",!0),e.isWebmFile(t.image)?(s(),i("video",vi,[l("source",{src:t.image,type:"video/webm"},null,8,pi)])):(s(),i("img",{key:2,class:"case-image",src:t.image,alt:"Case Image"},null,8,mi))],6),l("div",gi,[l("div",fi,p(t.price),1),v(h,{size:"small"})])],64))],10,oi)))),128))])])}],["__scopeId","data-v-c514ea24"]]),wi=M({name:"UserHeader",components:{Coin:ot},props:{initialWalletAddress:{type:String,default:null}},setup(e){const t=w("userStore"),s=a(),i=z(),l=W(),{tonConnectUI:n}=j(),r=o(!1),u=o(null),d=o(!1),v=o(!1),p=o(null),m=o(null),g=o({}),f=o(!!t.state.user.walletAddress),h=o(!1),k=o(!1);c((()=>t.state.user.walletAddress),(e=>{f.value=!!e})),c((()=>t.state.user.balance),((e,a)=>{if(void 0!==a&&e!==a){const t=e-a;t>0?(h.value=!0,setTimeout((()=>{h.value=!1}),1e3)):t<0&&(k.value=!0,setTimeout((()=>{k.value=!1}),1e3))}})),c((()=>i.value),(async e=>{if(e&&l.value&&!t.state.user.walletAddress)try{await C(l.value)}catch(a){u.value="Failed to sync wallet: "+(a.message||"Unknown error")}}),{immediate:!0}),c((()=>l.value),(async e=>{if(i.value&&e&&!t.state.user.walletAddress)try{await C(e)}catch(a){u.value="Failed to sync wallet: "+(a.message||"Unknown error")}}),{immediate:!0});const C=async e=>{if(e)try{const a=await rt.post("/api/update_wallet.php",{wallet_address:e},{withCredentials:!0});if(!a.data.success)throw new Error(a.data.message||"Failed to save wallet address");t.connectWallet(e),f.value=!0}catch(a){throw a}},T=()=>{if(d.value&&p.value&&m.value){const e=p.value.getBoundingClientRect(),a=window.innerHeight,t=m.value.offsetHeight||100,s=a-e.bottom<t+10;m.value.style.top=s?e.top-t-5+"px":`${e.bottom+5}px`;const i=m.value.offsetWidth||160;e.right-i<10?m.value.style.left=`${Math.max(10,e.left)}px`:m.value.style.left=e.right-i+"px"}},A=e=>{d.value&&p.value&&m.value&&!p.value.contains(e.target)&&!m.value.contains(e.target)&&(d.value=!1)};return c(d,(e=>{e&&y((()=>{T()}))})),b((()=>{f.value=!!t.state.user.walletAddress,i.value&&l.value&&!t.state.user.walletAddress&&C(l.value).catch((e=>{})),e.initialWalletAddress&&!t.state.user.walletAddress&&(t.connectWallet(e.initialWalletAddress),f.value=!0),document.addEventListener("click",A),window.addEventListener("resize",T),window.addEventListener("scroll",T),window.addEventListener("orientationchange",(()=>{d.value&&setTimeout(T,300)}))})),F((()=>{document.removeEventListener("click",A),window.removeEventListener("resize",T),window.removeEventListener("scroll",T)})),{userStore:t,connecting:r,error:u,isDropdownOpen:d,showCopySuccess:v,copySuccessStyle:g,dropdownButton:p,dropdownMenu:m,connectWallet:async()=>{r.value=!0,u.value=null;try{if(n&&i.value&&l.value&&!t.state.user.walletAddress)return void(await C(l.value));if(n){if(i.value)try{await n.disconnect(),await new Promise((e=>setTimeout(e,300)))}catch(e){}await n.openModal()}else{await new Promise((e=>setTimeout(e,1e3)));const e="0x1234567890abcdef1234567890abcdef12345678";await C(e)}}catch(a){if(u.value="Failed to connect wallet: "+(a.message||"Unknown error"),a.message&&a.message.includes("already connected")&&i.value&&l.value)try{await C(l.value),u.value=null}catch(s){u.value="Failed to sync wallet: "+(s.message||"Unknown error")}}finally{r.value=!1}},disconnectWallet:async()=>{try{if(n&&i.value)try{await n.disconnect()}catch(e){}const a=await rt.post("/api/update_wallet.php",{disconnect:!0},{withCredentials:!0});if(!a.data.success)throw new Error(a.data.message||"Failed to disconnect wallet in database");t.disconnectWallet(),d.value=!1,f.value=!1}catch(a){u.value="Failed to disconnect wallet: "+(a.message||"Unknown error")}},closeError:()=>{u.value=null},copyAddress:async()=>{try{const a=t.state.user.walletAddress;if(!a)return void(u.value="No wallet address available to copy");if(p.value){const e=p.value.getBoundingClientRect();g.value={top:`${e.bottom+10}px`,left:`${e.left+e.width/2}px`,transform:"translateX(-50%)"}}let s=!1;if(navigator.clipboard&&navigator.clipboard.writeText)try{await navigator.clipboard.writeText(a),s=!0}catch(e){}if(!s&&window.Telegram&&window.Telegram.WebApp)try{window.Telegram.WebApp.readTextFromClipboard((function(e){window.Telegram.WebApp.copyTextToClipboard(a),s=!0}))}catch(e){}if(!s){const t=document.createElement("textarea");t.value=a,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();try{s=document.execCommand("copy")}catch(e){}document.body.removeChild(t)}if(!s)return void(u.value=`Clipboard access blocked. Please manually copy: ${a}`);d.value=!1,v.value=!0,setTimeout((()=>{v.value=!1}),2e3)}catch(e){u.value="Failed to copy address: "+(e.message||"Unknown error")}},walletConnected:f,isAnimatingBalanceIncrease:h,isAnimatingBalanceDecrease:k,navigateToProfile:()=>{s.push("/profile")},toggleDropdown:()=>{d.value=!d.value,d.value&&y((()=>{T()}))}}}}),bi={class:"user-header"},yi={class:"user-header-row"},ki=["src"],Ci={key:1,class:"avatar",src:"/images/effects/profile.svg",alt:"User Avatar"},Ti={class:"profile-info"},Ai={class:"profile-name"},_i={class:"wallet-section"},Si=["disabled"],Ii={class:"button-label"},xi={key:1,class:"wallet-dropdown-container"},Ei={key:0,class:"dropdown-menu",ref:"dropdownMenu"},Oi={class:"coin-count"},Mi={class:"coin-container"},Pi={key:1,class:"wallet-error alert"};const Ni=q(wi,[["render",function(e,a,t,n,o,c){const m=P("Coin");return s(),i("header",bi,[l("div",yi,[l("div",{class:"profile",onClick:a[0]||(a[0]=(...a)=>e.navigateToProfile&&e.navigateToProfile(...a)),style:{cursor:"pointer"}},[e.userStore.state.user.photoUrl?(s(),i("img",{key:0,class:"avatar",src:e.userStore.state.user.photoUrl,alt:"User Avatar"},null,8,ki)):(s(),i("img",Ci)),l("div",Ti,[l("div",Ai,p(e.userStore.displayName),1)])]),l("div",_i,[e.walletConnected?(s(),i("div",xi,[l("button",{class:"wallet-address-button",onClick:a[2]||(a[2]=(...a)=>e.toggleDropdown&&e.toggleDropdown(...a)),ref:"dropdownButton"},[l("span",null,p(e.userStore.formattedWalletAddress),1),a[7]||(a[7]=l("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M1 1L5 5L9 1",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1))],512),e.isDropdownOpen?(s(),i("div",Ei,[l("button",{class:"dropdown-item",onClick:a[3]||(a[3]=(...a)=>e.copyAddress&&e.copyAddress(...a))},a[8]||(a[8]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M8 5H6C4.89543 5 4 5.89543 4 7V19C4 20.1046 4.89543 21 6 21H16C17.1046 21 18 20.1046 18 19V17M8 5C8 6.10457 8.89543 7 10 7H14C15.1046 7 16 6.10457 16 5M8 5C8 3.89543 8.89543 3 10 3H14C15.1046 3 16 3.89543 16 5M16 5H18C19.1046 5 20 5.89543 20 7V13",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),l("span",null,"Copy Address",-1)])),l("button",{class:"dropdown-item disconnect",onClick:a[4]||(a[4]=(...a)=>e.disconnectWallet&&e.disconnectWallet(...a))},a[9]||(a[9]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9M16 17L21 12M21 12L16 7M21 12H9",stroke:"#FF4D4D","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),l("span",{class:"disconnect-text"},"Disconnect",-1)]))],512)):d("",!0)])):(s(),i("button",{key:0,class:"wallet-button",onClick:a[1]||(a[1]=(...a)=>e.connectWallet&&e.connectWallet(...a)),disabled:e.connecting},[l("span",Ii,p(e.connecting?"Connecting...":"Connect Wallet"),1)],8,Si)),l("div",{class:r(["coin-count-container",{"balance-increase":e.isAnimatingBalanceIncrease,"balance-decrease":e.isAnimatingBalanceDecrease}]),onClick:a[5]||(a[5]=(...a)=>e.navigateToProfile&&e.navigateToProfile(...a)),style:{cursor:"pointer"}},[l("div",Oi,p(e.userStore.formattedBalance),1),l("div",Mi,[v(m,{size:"medium"})])],2)])]),e.showCopySuccess?(s(),i("div",{key:0,class:"copy-success",style:f(e.copySuccessStyle)}," Address copied! ",4)):d("",!0),e.error?(s(),i("div",Pi,[u(p(e.error)+" ",1),l("button",{class:"close-error",onClick:a[6]||(a[6]=(...a)=>e.closeError&&e.closeError(...a))},"")])):d("",!0)])}],["__scopeId","data-v-bd830ce8"]]),Di=M({name:"MainPage",components:{UserHeader:Ni,LiveDrop:si,CasesList:hi},emits:["open-modal"],setup:(e,{emit:a})=>({userStore:w("userStore"),handleOpenModal:e=>{a("open-modal",e)}})}),Fi={class:"main-page"},Ri={class:"main-panel"};const Ui=q(Di,[["render",function(e,a,t,n,r,o){const c=P("UserHeader"),u=P("LiveDrop"),d=P("CasesList");return s(),i("div",Fi,[l("div",Ri,[v(c),v(u),v(d,{onOpenModal:e.handleOpenModal},null,8,["onOpenModal"])])])}],["__scopeId","data-v-e2814d7c"]]),Li={class:"weekly-leaderboard"},Bi={class:"leaderboard-tabs"},zi={key:0,class:"loading-state"},Wi={key:1,class:"error-state"},ji={class:"error-message"},$i={key:0,class:"rewards-section"},qi={class:"rewards-header"},Hi={key:0,class:"rewards-subtitle"},Gi={class:"rewards-container"},Ji={class:"rewards-row"},Vi={key:0,class:"reward-card reward-card-large"},Ki=["src"],Yi={key:1,class:"reward-card reward-card-large"},Qi=["src"],Xi={class:"rewards-row"},Zi={key:0,class:"reward-card"},el=["src"],al={key:1,class:"reward-card"},tl=["src"],sl={key:2,class:"reward-card"},il=["src"],ll={class:"leaderboard-users"},nl={class:"user-info"},rl=["src"],ol={class:"user-details"},cl={class:"user-name"},ul={class:"user-stats"},dl={class:"user-earnings"},vl={class:"earnings-amount"},pl={class:"amount-text"},ml={class:"coin-wrapper"},gl={class:"user-rank"},fl={class:"rank-text"},hl={key:1,class:"current-user-fixed"},wl={class:"user-status-card"},bl={class:"user-info"},yl=["src"],kl={class:"user-details"},Cl={class:"user-name"},Tl={class:"user-stats"},Al={class:"user-earnings"},_l={class:"earnings-amount"},Sl={class:"amount-text"},Il={class:"coin-wrapper"},xl={class:"user-rank"},El={class:"rank-text"},Ol=q({__name:"WeeklyLeaderboard",setup(e){const a=w("userStore"),n=o("weekly"),c=o([]),u=o([]),f=o(null),h=o(!0),y=o(null),k=o(null),C=o(null),T=e=>{n.value=e,E(e)},A=e=>e?e.startsWith("/")?e:`/${e}`:"",_=e=>{if(null==e)return"0";const a=e.toString().split(".");return a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),a.join(".")},S=e=>null==e?"0":e>=1e6?_((e/1e6).toFixed(1))+"M":e>=1e3?_((e/1e3).toFixed(1))+"k":_(e),I=t((()=>{const e="weekly"===n.value?c.value:u.value;return!!(a.state.user&&e.length&&f.value)&&e.some((e=>e.user_id===f.value.user_id))})),x=t((()=>"weekly"===n.value&&k.value&&Object.keys(k.value).length>0)),E=async e=>{try{h.value=!0,y.value=null,"friends"===e&&(k.value=null,C.value=null);const a="friends"===e?"/api/week_top.php?type=friends":"/api/week_top.php",t=await rt.get(a,{withCredentials:!0});if(t.data){f.value=t.data.user_stat||null;const a=(t.data.week_users||[]).map(((e,a)=>({...e,rank:a+1})));"friends"===e?u.value=a:(c.value=a,t.data.rewards&&(k.value=t.data.rewards,C.value=t.data.rewards_date||null))}}catch(a){y.value="Failed to load leaderboard data. Please try again."}finally{h.value=!1}},O=t((()=>"weekly"===n.value?c.value:u.value));return b((()=>{E(n.value)})),(e,a)=>(s(),i("div",Li,[l("div",Bi,[l("div",{class:r(["tab-button",{active:"weekly"===n.value}]),onClick:a[0]||(a[0]=e=>T("weekly"))},a[3]||(a[3]=[l("div",{class:"tab-text"},"Weekly",-1)]),2),l("div",{class:r(["tab-button",{active:"friends"===n.value}]),onClick:a[1]||(a[1]=e=>T("friends"))},a[4]||(a[4]=[l("div",{class:"tab-text"},"Friends",-1)]),2)]),h.value?(s(),i("div",zi,a[5]||(a[5]=[l("div",{class:"loading-spinner"},null,-1),l("div",{class:"loading-text"},"Loading leaderboard data...",-1)]))):y.value?(s(),i("div",Wi,[l("div",ji,p(y.value),1),l("button",{class:"retry-button",onClick:a[2]||(a[2]=e=>E(n.value))},a[6]||(a[6]=[l("div",{class:"button-label"},"Try Again",-1)]))])):(s(),i(m,{key:2},[x.value?(s(),i("div",$i,[l("div",qi,[a[7]||(a[7]=l("div",{class:"rewards-title"},"Get prizes for being at the top",-1)),C.value?(s(),i("div",Hi," Prizes will be drawn on "+p(C.value),1)):d("",!0)]),l("div",Gi,[l("div",Ji,[k.value["1st"]?(s(),i("div",Vi,[a[8]||(a[8]=l("div",{class:"reward-glow reward-glow-gold"},null,-1)),l("img",{class:"reward-image reward-image-large",src:A(k.value["1st"].image),alt:"1st place prize"},null,8,Ki),a[9]||(a[9]=l("div",{class:"reward-badge reward-badge-gold"},[l("div",{class:"reward-badge-text"},"1st")],-1))])):d("",!0),k.value["2nd"]?(s(),i("div",Yi,[a[10]||(a[10]=l("div",{class:"reward-glow reward-glow-silver"},null,-1)),l("img",{class:"reward-image reward-image-large",src:A(k.value["2nd"].image),alt:"2nd place prize"},null,8,Qi),a[11]||(a[11]=l("div",{class:"reward-badge reward-badge-silver"},[l("div",{class:"reward-badge-text"},"2nd")],-1))])):d("",!0)]),l("div",Xi,[k.value["3rd"]?(s(),i("div",Zi,[a[12]||(a[12]=l("div",{class:"reward-glow reward-glow-bronze"},null,-1)),l("img",{class:"reward-image",src:A(k.value["3rd"].image),alt:"3rd place prize"},null,8,el),a[13]||(a[13]=l("div",{class:"reward-badge reward-badge-bronze"},[l("div",{class:"reward-badge-text"},"3rd")],-1))])):d("",!0),k.value["4-10"]?(s(),i("div",al,[l("img",{class:"reward-image",src:A(k.value["4-10"].image),alt:"4-10 place prize"},null,8,tl),a[14]||(a[14]=l("div",{class:"reward-badge reward-badge-dark"},[l("div",{class:"reward-badge-text"},"4-10")],-1))])):d("",!0),k.value["11-20"]?(s(),i("div",sl,[l("img",{class:"reward-image",src:A(k.value["11-20"].image),alt:"11-20 place prize"},null,8,il),a[15]||(a[15]=l("div",{class:"reward-badge reward-badge-dark"},[l("div",{class:"reward-badge-text"},"11-20")],-1))])):d("",!0)])])])):d("",!0),a[16]||(a[16]=l("div",{class:"leaderboard-headers"},[l("div",{class:"header-text"},"User"),l("div",{class:"header-text"},"Earned Income")],-1)),l("div",ll,[(s(!0),i(m,null,g(O.value,(e=>(s(),i("div",{key:e.user_id,class:r(["user-card",{highlight:e.rank<=3,"current-user":f.value&&e.user_id===f.value.user_id}])},[l("div",nl,[l("img",{class:"user-avatar",src:e.avatar,alt:"User Avatar"},null,8,rl),l("div",ol,[l("div",cl,p(e.name),1),l("div",ul,"Opened "+p(_(e.cases_week))+" cases",1)])]),l("div",dl,[l("div",vl,[l("div",pl,p(S(e.profit_week)),1),l("div",ml,[v(ot,{size:"small"})])]),l("div",gl,[l("div",fl,"#"+p(e.rank),1)])])],2)))),128))]),f.value&&!I.value?(s(),i("div",hl,[l("div",wl,[l("div",bl,[l("img",{class:"user-avatar",src:f.value.avatar,alt:"Your Avatar"},null,8,yl),l("div",kl,[l("div",Cl,p(f.value.name||"You"),1),l("div",Tl,"Opened "+p(_(f.value.cases_week))+" cases",1)])]),l("div",Al,[l("div",_l,[l("div",Sl,p(S(f.value.profit_week)),1),l("div",Il,[v(ot,{size:"small"})])]),l("div",xl,[l("div",El,"#"+p(f.value.position),1)])])])])):d("",!0)],64))]))}},[["__scopeId","data-v-981147a7"]]),Ml={class:"weekly-page"},Pl=q({__name:"WeeklyPage",setup:e=>(e,a)=>(s(),i("div",Ml,[v(Ol)]))},[["__scopeId","data-v-aafc2f0f"]]),Nl={key:0,class:"error-message"},Dl={key:1,class:"success-message"},Fl={class:"frame-2087328884"},Rl={class:"frame-2087328930"},Ul={class:"button"},Ll=["disabled"],Bl={class:"frame-2087328931"},zl={class:"button3"},Wl=["disabled"],jl={class:"coin"},$l={class:"frame-2087328873"},ql={class:"label4"},Hl={class:"coin2"},Gl={class:"label5"},Jl={key:0},Vl={key:1},Kl=q({__name:"ModalWithdrawRef",props:{isOpen:{type:Boolean,default:!1},availableBalance:{type:Number,default:0},userWallet:{type:String,default:null}},emits:["close","withdraw-complete"],setup(e,{emit:a}){const n=e,u=a,m=o(""),g=o(""),f=o(""),h=o(""),w=o(!1),b=o(!1),y=t((()=>!!n.userWallet)),k=t((()=>{const e=m.value&&m.value.trim().length>=10,a=parseFloat(g.value),t=!isNaN(a)&&a>0&&a<=n.availableBalance&&a>=1;return e&&t})),C=()=>{n.userWallet?m.value=n.userWallet:f.value="No linked wallet available. Please connect a wallet first."},T=()=>{n.availableBalance>0&&(g.value=n.availableBalance.toString())},A=async()=>{var e,a;if(k.value)try{f.value="",h.value="",w.value=!0;const e=parseFloat(g.value);if(e<1)return f.value="Minimum withdrawal amount is 1 TON",void(w.value=!1);const a=await rt.post("/api/withdraw_ton_ref.php",{wallet_address:m.value.trim(),amount:e},{withCredentials:!0});a.data.success?(h.value=a.data.message||"Withdrawal request successful!",g.value="",u("withdraw-complete",{amount:e,success:!0}),setTimeout((()=>{x()}),3e3)):f.value=a.data.error||"Failed to process withdrawal request"}catch(t){f.value=(null==(a=null==(e=t.response)?void 0:e.data)?void 0:a.error)||"An error occurred during withdrawal"}finally{w.value=!1}},x=()=>{w.value||(b.value=!0,setTimeout((()=>{u("close"),b.value=!1,f.value="",h.value="",g.value=""}),300))};return c((()=>n.userWallet),(e=>{e&&n.isOpen&&(m.value=e)}),{immediate:!0}),c((()=>n.isOpen),(e=>{e||(f.value="",h.value="",g.value="")})),(a,t)=>{return e.isOpen?(s(),i("div",{key:0,class:"modal-overlay",onClick:_(x,["self"])},[l("div",{class:r(["modal",{closing:b.value}])},[t[5]||(t[5]=l("div",{class:"frame-2087328889"},[l("div",{class:"withdraw-referral-balance"},"Withdraw referral balance"),l("div",{class:"enter-the-amount-you-want-to-withdraw"}," Enter the amount you want to withdraw ")],-1)),l("div",{class:"icon",onClick:x},t[2]||(t[2]=[l("svg",{class:"close",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18M6 6L18 18",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),f.value?(s(),i("div",Nl,p(f.value),1)):d("",!0),h.value?(s(),i("div",Dl,p(h.value),1)):d("",!0),l("div",Fl,[l("div",Rl,[l("div",Ul,[S(l("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),class:"wallet-input",placeholder:"TON wallet address",disabled:w.value},null,8,Ll),[[I,m.value]])]),l("div",{class:r(["button2",{disabled:!y.value||w.value}]),onClick:C},t[3]||(t[3]=[l("div",{class:"label2"},"Use a linked wallet",-1)]),2)]),l("div",Bl,[l("div",zl,[S(l("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>g.value=e),class:"amount-input",placeholder:"Amount (Min: 1 TON)",disabled:w.value},null,8,Wl),[[I,g.value]]),l("div",jl,[v(ot,{size:"small"})])]),l("div",{class:"button2",onClick:T},[t[4]||(t[4]=l("div",{class:"label3"},"Available:",-1)),l("div",$l,[l("div",ql,p((n=e.availableBalance,"number"!=typeof n&&(n=Number(n)||0),n.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "))),1),l("div",Hl,[v(ot,{size:"small"})])])])]),l("div",{class:r(["button5",{disabled:!k.value||w.value}]),onClick:A},[l("div",Gl,[w.value?(s(),i("span",Vl,"Processing...")):(s(),i("span",Jl,"Withdraw"))])],2)])],2)])):d("",!0);var n}}},[["__scopeId","data-v-8552786f"]]),Yl={class:"invite-page"},Ql={class:"main-top-panel"},Xl={key:0,class:"loading-state"},Zl={key:1,class:"error-state"},en={class:"error-message"},an={class:"referral-banner"},tn={class:"banner-title"},sn={class:"banner-buttons"},ln={class:"icon"},nn={key:0,class:"copy-icon",src:"/images/actions/copy.svg",alt:"Copy"},rn={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},on={key:0,class:"copy-success"},cn={class:"balance-section"},un={class:"balance-info"},dn={class:"balance-display"},vn={class:"balance-amount"},pn={class:"coin-small"},mn=["disabled"],gn={key:0,class:"success-message"},fn={class:"invited-section"},hn={class:"invited-header"},wn={class:"count-badge"},bn={class:"count-text"},yn={key:0,class:"empty-referrals"},kn={key:1,class:"invited-list"},Cn={class:"user-row-left"},Tn=["src","alt"],An={class:"user-details"},_n={class:"user-name"},Sn={class:"label-small"},In={class:"profit-display"},xn={class:"profit-amount"},En={class:"coin-small"},On=q({__name:"InvitePage",setup(e){const a=w("userStore"),n=o(null),c=o([]),f=o(0),h=o(!0),y=o(null),k=o(""),C=o(!1),T=o("case_official_bot"),A=o(!1),_=t((()=>"undefined"!=typeof window&&window.Telegram&&window.Telegram.WebApp)),S=t((()=>a.state.user.walletAddress||null)),I=t((()=>{return n.value&&n.value.referral_code?(e=n.value.referral_code)?`https://t.me/${T.value}/case?startapp=ref_${e}`:"":"";var e})),x=t((()=>" Hey! I found this awesome crypto app where we can earn rewards together! \n\nJoin me and get a special bonus when you sign up! \n\n")),E=async()=>{try{h.value=!0,y.value=null;const e=await rt.get("/api/referrals.php",{withCredentials:!0});e.data.success?(n.value=e.data.referral,c.value=e.data.referred_users||[],f.value=e.data.total_referred||0):y.value=e.data.error||"Failed to load referral data"}catch(e){y.value="An error occurred while loading referral data"}finally{h.value=!1}},O=async()=>{try{let t=!1;if(_.value&&window.Telegram.WebApp.copyTextToClipboard)try{window.Telegram.WebApp.copyTextToClipboard(I.value),t=!0}catch(e){}if(!t&&navigator.clipboard&&navigator.clipboard.writeText)try{await navigator.clipboard.writeText(I.value),t=!0}catch(e){}if(!t)try{const a=document.createElement("textarea");a.value=I.value,a.style.position="fixed",a.style.left="-999999px",a.style.top="-999999px",a.setAttribute("readonly","readonly"),document.body.appendChild(a),a.focus(),a.select();try{t=document.execCommand("copy")}catch(e){}document.body.removeChild(a)}catch(a){}C.value=!0,setTimeout((()=>{C.value=!1}),2e3)}catch(e){C.value=!0,setTimeout((()=>{C.value=!1}),2e3)}},M=()=>{try{if(!I.value)return void alert("Referral link is not available. Please try again.");const a=_.value&&window.Telegram.WebApp.platform?window.Telegram.WebApp.platform:"unknown",t=(_.value&&window.Telegram.WebApp.version&&window.Telegram.WebApp.version,"tdesktop"===a||a.includes("desktop"));if(_.value&&window.Telegram.WebApp.openTelegramLink)try{const e=`https://t.me/share/url?url=${encodeURIComponent(I.value)}&text=${encodeURIComponent(x.value)}`;return void window.Telegram.WebApp.openTelegramLink(e)}catch(e){}if(_.value&&window.Telegram.WebApp.switchInlineQuery)try{return void window.Telegram.WebApp.switchInlineQuery("",["users","groups","channels"])}catch(e){}if(t&&_.value&&window.Telegram.WebApp.openLink)try{const e=`tg://msg_url?url=${encodeURIComponent(I.value)}&text=${encodeURIComponent(x.value)}`;return void window.Telegram.WebApp.openLink(e)}catch(e){}try{const e=`https://t.me/share/url?url=${encodeURIComponent(I.value)}&text=${encodeURIComponent(x.value)}`;return void(_.value&&window.Telegram.WebApp.openLink?window.Telegram.WebApp.openLink(e):window.open(e,"_blank"))}catch(e){}O();const s=document.createElement("div");s.className="desktop-share-notification",s.innerHTML='\n      <div class="notification-content">\n        <div class="notification-title">Link copied!</div>\n        <div class="notification-text">Paste the link in Telegram to share with friends</div>\n      </div>\n      <button class="notification-close">&times;</button>\n    ',document.body.appendChild(s);s.querySelector(".notification-close").addEventListener("click",(()=>{document.body.removeChild(s)})),setTimeout((()=>{document.body.contains(s)&&document.body.removeChild(s)}),5e3)}catch(a){O(),alert("Link copied to clipboard. You can paste it in Telegram to share with friends.")}},P=e=>("number"!=typeof e&&(e=Number(e)||0),e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")),N=()=>{n.value&&n.value.balance>0?A.value=!0:(y.value="You don't have any referral balance to withdraw",setTimeout((()=>{y.value=null}),3e3))},D=()=>{A.value=!1},F=e=>{e.success&&(k.value=`Withdrawal of ${P(e.amount)} TON has been processed!`,n.value&&(n.value.balance=Math.max(0,n.value.balance-e.amount)),setTimeout((()=>{k.value=""}),5e3),E())};return b((()=>{E(),_.value})),(e,a)=>{var t,o,w,b,T;return s(),i("div",Yl,[l("div",Ql,[v(Ni),h.value?(s(),i("div",Xl,a[0]||(a[0]=[l("div",{class:"loading-spinner"},null,-1),l("div",{class:"loading-text"},"Loading referral data...",-1)]))):y.value?(s(),i("div",Zl,[l("div",en,p(y.value),1),l("button",{class:"retry-button",onClick:E},a[1]||(a[1]=[l("div",{class:"button-label"},"Try Again",-1)]))])):(s(),i(m,{key:2},[l("div",an,[a[5]||(a[5]=l("img",{class:"rectangle-bg",src:"/images/effects/rectangle_rotate.png",alt:"Background"},null,-1)),l("div",tn,[u("Get "+p((null==(t=n.value)?void 0:t.percent)||20)+"% of your friends ",1),a[2]||(a[2]=l("span",null,"deposits",-1))]),l("div",sn,[l("button",{class:"invite-button",onClick:M},a[3]||(a[3]=[l("div",{class:"button-label"},"Invite a friend",-1)])),l("button",{class:"copy-button",onClick:O},[l("div",ln,[C.value?(s(),i("svg",rn,a[4]||(a[4]=[l("path",{d:"M20 6L9 17L4 12",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(s(),i("img",nn))])])]),C.value?(s(),i("div",on," Link copied to clipboard! ")):d("",!0)]),l("div",cn,[l("div",un,[a[6]||(a[6]=l("div",{class:"label-small"},"Referral balance",-1)),l("div",dn,[l("div",vn,p(P((null==(o=n.value)?void 0:o.balance)||0)),1),l("div",pn,[v(ot,{size:"small"})])])]),l("button",{class:r(["withdraw-button",{"withdraw-button-disabled":!(null==(w=n.value)?void 0:w.balance)}]),onClick:N,disabled:!(null==(b=n.value)?void 0:b.balance)},a[7]||(a[7]=[l("div",{class:"button-label"},"Withdraw",-1)]),10,mn)]),k.value?(s(),i("div",gn,p(k.value),1)):d("",!0),l("div",fn,[l("div",hn,[a[8]||(a[8]=l("div",{class:"section-title"},"Invited",-1)),l("div",wn,[l("div",bn,p(f.value),1)])]),a[10]||(a[10]=l("div",{class:"invited-list-header"},[l("div",{class:"label-small"},"User"),l("div",{class:"label-small"},"Profit")],-1)),0===c.value.length?(s(),i("div",yn,a[9]||(a[9]=[l("div",{class:"empty-message"},"You haven't invited any friends yet",-1)]))):(s(),i("div",kn,[(s(!0),i(m,null,g(c.value,(e=>(s(),i("div",{key:e.id,class:"user-row"},[l("div",Cn,[l("img",{class:"user-avatar",src:e.photo_url||"/images/effects/profile.svg",alt:e.first_name},null,8,Tn),l("div",An,[l("div",_n,p(e.first_name)+" "+p(e.last_name),1),l("div",Sn,"Opened "+p(e.cases_opened||0)+" cases",1)])]),l("div",In,[l("div",xn,p(P(e.total_profit||0)),1),l("div",En,[v(ot,{size:"small"})])])])))),128))]))])],64))]),v(Kl,{"is-open":A.value,"available-balance":(null==(T=n.value)?void 0:T.balance)||0,"user-wallet":S.value,onClose:D,onWithdrawComplete:F},null,8,["is-open","available-balance","user-wallet"])])}}},[["__scopeId","data-v-6ac55076"]]),Mn={class:"modal-header"},Pn={class:"deposit"},Nn={key:0,class:"error-message"},Dn={key:1,class:"transaction-status"},Fn=["disabled"],Rn={class:"coin"},Un=["disabled"],Ln={key:0,class:"button-label"},Bn={key:1,class:"button-label"},zn={key:2,class:"button-label"},Wn=q({__name:"ModalDeposit",props:{isOpen:{type:Boolean,default:!1},currentBalance:{type:Number,default:0},walletAddress:{type:String,default:null},paymentMethod:{type:String,default:"ton",validator:e=>["ton","cryptobot"].includes(e)}},emits:["close","deposit","backToChoosePS"],setup(e,{emit:a}){const n=e,u=a,m=t((()=>"ton"===n.paymentMethod?"TON":"CryptoBot"));z();const g=W(),{tonConnectUI:f}=j(),h=o(""),w=o(!1),y=o(!1),k=o(!1),C=o(!1),T=o(null),A=o(""),x=o(""),E=o(""),O=o(null),M=o(!1),P=o(null);b((()=>{n.walletAddress||g.value,window.visualViewport&&window.visualViewport.addEventListener("resize",U);const e=()=>{"visible"===document.visibilityState&&V()},a=()=>{V()};document.addEventListener("visibilitychange",e),window.addEventListener("focus",a),V(),F((()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("focus",a)}))})),F((()=>{window.visualViewport&&window.visualViewport.removeEventListener("resize",U)}));const N=()=>{M.value=!0,setTimeout((()=>{P.value&&P.value.scrollIntoView({behavior:"smooth",block:"center"})}),300)},D=()=>{M.value=!1},U=()=>{window.visualViewport&&(M.value=window.visualViewport.height<.8*window.innerHeight)},L=()=>{const e=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return`${e()}-${e()}-${e()}-${e()}`},B=()=>{O.value&&(clearTimeout(O.value),O.value=null),k.value=!0,C.value=!1,w.value=!1,y.value=!1,setTimeout((()=>{u("close"),H()}),150)},$=()=>{C.value||(O.value&&(clearTimeout(O.value),O.value=null),k.value=!0,setTimeout((()=>{q(),H(),u("backToChoosePS")}),150))},q=()=>{C.value||(k.value=!0,O.value=setTimeout((()=>{u("close"),H()}),150))},H=()=>{h.value="",w.value=!1,y.value=!1,k.value=!1,T.value=null,x.value="",A.value="",E.value="",C.value=!1,O.value&&(clearTimeout(O.value),O.value=null)},G=async()=>{const e=parseFloat(h.value);if(!(isNaN(e)||e<=0||C.value))if(e<1)T.value="Minimum deposit amount: 1 TON";else{T.value=null,C.value=!0,w.value=!0;try{if("ton"===n.paymentMethod){const a=n.walletAddress?n.walletAddress:g.value?g.value:null;if(!a)throw new Error("No wallet address available for deposit");await J(e,a)}else"cryptobot"===n.paymentMethod&&await K(e)}catch(a){T.value=a.message||"Transaction error. Please try again.",w.value=!1,C.value=!1}}},J=async(e,a)=>{if(!f)throw C.value=!1,new Error("TON Connect UI is not available");try{const s={amount:e,walletAddress:a,genId:L(),timestamp:Date.now(),status:"pending"};let i;localStorage.setItem("pendingTonTransaction",JSON.stringify(s)),A.value="Getting transaction payload...";try{const e=await rt.post("https://case-bot.com:8443/genBocTelegram",{payload:s.genId});if(!e.data||!e.data.payload)throw new Error("Invalid payload response");i=e.data.payload,s.payload=i,localStorage.setItem("pendingTonTransaction",JSON.stringify(s))}catch(t){throw C.value=!1,localStorage.removeItem("pendingTonTransaction"),new Error("Failed to prepare transaction. Please try again.")}try{A.value="Registering transaction...";const t=await rt.post("/api/register_pending_transaction.php",{wallet_address:a,amount:e,gen_id:s.genId,status:"preflight"},{withCredentials:!0});t.data&&t.data.success&&(s.transactionId=t.data.transaction_id,localStorage.setItem("pendingTonTransaction",JSON.stringify(s)))}catch(t){}const l=Math.floor(1e9*e),n={validUntil:Math.floor(Date.now()/1e3)+300,messages:[{address:"UQDy8VEZi7yDfxvE460U00a8xWC0yHaKMDfXY5Xb7IggxNPF",amount:l.toString(),payload:i}]};A.value="Waiting for wallet confirmation...",s.status="sending",s.sendTimestamp=Date.now(),localStorage.setItem("pendingTonTransaction",JSON.stringify(s));const r=await f.sendTransaction(n);let o="";r&&"object"==typeof r?o=r.boc?r.boc:r.data?r.data:JSON.stringify(r):"string"==typeof r&&(o=r),s.boc=o,s.status="sent",s.sentTimestamp=Date.now(),localStorage.setItem("pendingTonTransaction",JSON.stringify(s)),A.value="Transaction sent, registering...";try{const t=await rt.post("/api/check_transaction.php",{transaction_boc:o,wallet_address:a,amount:e,gen_id:s.genId},{withCredentials:!0});return t.data.success?(t.data.transaction_id&&(s.transactionId=t.data.transaction_id),s.status="completed",s.completedTimestamp=Date.now(),localStorage.setItem("pendingTonTransaction",JSON.stringify(s)),w.value=!1,y.value=!0,A.value="Transaction sent! Your balance will be credited automatically once processed.",C.value=!1,O.value=setTimeout((()=>{u("deposit",0),q(),localStorage.removeItem("pendingTonTransaction")}),4e3),!0):(s.status="registration_failed",s.error=t.data.message||"Failed to register transaction",localStorage.setItem("pendingTonTransaction",JSON.stringify(s)),w.value=!1,y.value=!0,A.value="Transaction sent! Your balance will be credited automatically once processed.",C.value=!1,O.value=setTimeout((()=>{u("deposit",0),q()}),4e3),!0)}catch(t){return s.status="registration_error",s.error=t.message||"Error during transaction registration",localStorage.setItem("pendingTonTransaction",JSON.stringify(s)),w.value=!1,y.value=!0,A.value="Transaction sent! Your balance will be credited automatically once processed.",C.value=!1,O.value=setTimeout((()=>{u("deposit",0),q()}),4e3),!0}}catch(t){try{const e=JSON.parse(localStorage.getItem("pendingTonTransaction"));e&&(e.status="error",e.error=t.message||"Unknown error",e.errorTimestamp=Date.now(),localStorage.setItem("pendingTonTransaction",JSON.stringify(e)))}catch(s){}throw C.value=!1,new Error(t.message||"Failed to complete TON deposit")}},V=async()=>{try{const a=localStorage.getItem("pendingTonTransaction");if(!a)return!1;const t=JSON.parse(a);if("sent"===t.status&&t.boc){const a=Date.now(),s=36e5;if(a-t.sentTimestamp>s)return localStorage.removeItem("pendingTonTransaction"),!1;w.value=!0,A.value="Recovering previous transaction...";try{const e=await rt.post("/api/check_transaction.php",{transaction_boc:t.boc,wallet_address:t.walletAddress,amount:t.amount,gen_id:t.genId},{withCredentials:!0});return e.data.success?(t.status="completed",t.completedTimestamp=Date.now(),localStorage.setItem("pendingTonTransaction",JSON.stringify(t)),w.value=!1,y.value=!0,A.value="Previously sent transaction has been registered successfully!",O.value=setTimeout((()=>{u("deposit",0),q(),localStorage.removeItem("pendingTonTransaction")}),4e3),!0):(t.status="recovery_failed",t.recoveryError=e.data.message,localStorage.setItem("pendingTonTransaction",JSON.stringify(t)),!1)}catch(e){return t.status="recovery_error",t.recoveryError=e.message,localStorage.setItem("pendingTonTransaction",JSON.stringify(t)),!1}}else if("pending"===t.status||"sending"===t.status){const e=Date.now(),a=6e5;return e-t.timestamp>a&&localStorage.removeItem("pendingTonTransaction"),!1}return!1}catch(e){return!1}},K=async e=>{if(isNaN(e)||e<=0)throw new Error("Invalid deposit amount");A.value="Preparing CryptoBot payment...";try{const a=await rt.get(`/api/create_pay_cryptobot.php?amount=${e}`);if(a.data.status){C.value=!1,w.value=!1,y.value=!0,A.value="Payment link generated. Opening CryptoBot...";const e=/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,t=a.data.url;if(O.value=setTimeout((()=>{u("deposit",0),q()}),4e3),e)window.location.href=t;else{const e=window.open(t,"_blank");e&&!e.closed&&void 0!==e.closed||(window.location.href=t)}return!0}throw new Error(a.data.error||"Failed to create CryptoBot payment")}catch(a){throw a}};return c((()=>h.value),(e=>{"string"==typeof e&&(h.value=(e=>{if(!e)return"";const a=(e=e.toString().replace(/[^\d.]/g,"")).split(".");return a.length>2&&(e=`${a[0]}.${a.slice(1).join("")}`),a.length>1&&a[1].length>4&&(e=`${a[0]}.${a[1].substring(0,4)}`),e})(e))})),(a,t)=>e.isOpen?(s(),i("div",{key:0,class:"modal-overlay",onClick:_(q,["self"])},[l("div",{class:r(["modal",{closing:k.value,"keyboard-active":M.value}])},[l("div",Mn,[l("div",{class:"back-button",onClick:$},t[1]||(t[1]=[l("svg",{class:"arrow-arrow-left-lg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M15.8334 10H4.16675M4.16675 10L10.0001 4.16667M4.16675 10L10.0001 15.8333",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),l("div",Pn,p(m.value)+" Deposit",1),t[3]||(t[3]=l("div",{class:"enter-the-amount-you-want-to-deposit"}," Enter the amount to deposit ",-1)),l("div",{class:"icon",onClick:B},t[2]||(t[2]=[l("svg",{class:"close",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18M6 6L18 18",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))]),T.value?(s(),i("div",Nn,p(T.value),1)):d("",!0),A.value?(s(),i("div",Dn,p(A.value),1)):d("",!0),l("div",{class:r(["input-group",{disabled:w.value||y.value}])},[S(l("input",{type:"number",inputmode:"decimal","onUpdate:modelValue":t[0]||(t[0]=e=>h.value=e),class:"amount-input",placeholder:"Enter amount",onFocus:N,onBlur:D,onKeyup:R(G,["enter"]),disabled:w.value||y.value,ref_key:"amountInput",ref:P},null,40,Fn),[[I,h.value]]),l("div",Rn,[v(ot,{size:"small"})])],2),l("button",{class:r(["deposit-button",{confirming:w.value,success:y.value,disabled:!h.value||isNaN(parseFloat(h.value))||parseFloat(h.value)<=0||C.value}]),onClick:G,disabled:!h.value||isNaN(parseFloat(h.value))||parseFloat(h.value)<=0||C.value},[w.value||y.value?w.value?(s(),i("div",Bn,"Processing...")):(s(),i("div",zn,"Success!")):(s(),i("div",Ln," Deposit "))],10,Un)],2)])):d("",!0)}},[["__scopeId","data-v-bb63d4c8"]]),jn={class:"frame-2087328435"},$n=["src","alt"],qn={class:"hint"},Hn={class:"coin"},Gn={class:"title"},Jn=q({__name:"ModalDepositsGifts",props:{isOpen:{type:Boolean,default:!1}},emits:["close","backToChoosePS"],setup(e,{emit:a}){const t=e,n=a,u=o([]),f=o(!1),h=o(!1),w=o(null),y=async()=>{h.value=!0,w.value=null;try{const e=await rt.get("/api/gifts_prices.php");u.value=e.data}catch(e){w.value="Failed to load gifts data"}finally{h.value=!1}},k=()=>{f.value=!0,setTimeout((()=>{n("close"),f.value=!1}),150)},C=()=>{f.value=!0,setTimeout((()=>{k(),n("backToChoosePS")}),150)},T=()=>{window.open("https://t.me/opencasesbots","_blank"),k()};return b((()=>{y()})),c((()=>t.isOpen),(e=>{e&&0===u.value.length&&y()})),(a,t)=>e.isOpen?(s(),i("div",{key:0,class:"modal-overlay",onClick:_(k,["self"])},[l("div",{class:r(["modal",{closing:f.value}])},[t[4]||(t[4]=l("div",{class:"frame-2087328894"},[l("div",{class:"deposit-with-gifts"},"Deposit with gifts")],-1)),l("div",{class:"frame-2087328886",onClick:C},t[0]||(t[0]=[l("svg",{class:"arrow-arrow-left-lg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M15.8334 10H4.16675M4.16675 10L10.0001 4.16667M4.16675 10L10.0001 15.8333",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),t[5]||(t[5]=l("div",{class:"send-a-gift-to-our-bot-and-we-will-credit-money-to-your-balance"}," Send a gift to our bot and we will credit money to your balance ",-1)),l("div",{class:"button",onClick:T},t[1]||(t[1]=[l("div",{class:"label"},"Open dialog with bot",-1)])),t[6]||(t[6]=l("div",{class:"gift-prices"},"Gift prices",-1)),l("div",jn,[(s(!0),i(m,null,g(u.value,((e,a)=>(s(),i("div",{key:a,class:"deposit"},[l("img",{class:"ezgif-8597-d-9-f-70-a-1286-1",src:e.img,alt:e.name},null,8,$n),l("div",qn,[l("div",Hn,[v(ot,{size:"small"})]),l("div",Gn,p(e.price),1)])])))),128)),t[2]||(t[2]=l("div",{class:"rectangle-161123953"},null,-1))]),l("div",{class:"icon",onClick:k},t[3]||(t[3]=[l("svg",{class:"close",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18M6 6L18 18",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))],2)])):d("",!0)}},[["__scopeId","data-v-643914d7"]]),Vn=q({__name:"ModalChoosePS",props:{isOpen:{type:Boolean,default:!1},currentBalance:{type:Number,default:0},walletAddress:{type:String,default:null}},emits:["close","deposit","open"],setup(e,{emit:a}){const t=a,n=o(!1),c=o(!1),u=o(!1),p=o(!1),g=()=>{n.value=!0,setTimeout((()=>{t("close"),n.value=!1}),150)},f=()=>{c.value=!0,g()},h=()=>{c.value=!1},w=()=>{u.value=!0,g()},b=()=>{u.value=!1},y=()=>{p.value=!0,g()},k=()=>{p.value=!1},C=()=>{c.value=!1,u.value=!1,p.value=!1,t("close"),setTimeout((()=>{t("open")}),50)},T=e=>{t("deposit",e)};return(a,t)=>(s(),i(m,null,[e.isOpen?(s(),i("div",{key:0,class:"modal-overlay",onClick:_(g,["self"])},[l("div",{class:r(["modal",{closing:n.value}])},[l("div",{class:"modal-header"},[t[1]||(t[1]=l("div",{class:"deposit"},"Deposit",-1)),t[2]||(t[2]=l("div",{class:"select-the-method-of-deposit"}," Select the method of deposit ",-1)),l("div",{class:"icon",onClick:g},t[0]||(t[0]=[l("svg",{class:"close",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18M6 6L18 18",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))]),l("div",{class:"payment-methods"},[l("div",{class:"payment-button",onClick:f},t[3]||(t[3]=[l("div",{class:"gradient-bg ton-gradient"},null,-1),l("div",{class:"button-content"},[l("img",{class:"payment-icon",src:"/images/actions/ton_btn.svg",alt:"TON"}),l("div",{class:"label"},"Ton")],-1)])),l("div",{class:"payment-button",onClick:w},t[4]||(t[4]=[l("div",{class:"gradient-bg cryptobot-gradient"},null,-1),l("div",{class:"button-content"},[l("img",{class:"payment-icon",src:"/images/actions/cryptobot_btn-min.png",alt:"CryptoBot"}),l("div",{class:"label"},"CryptoBot")],-1)])),l("div",{class:"payment-button",onClick:y},t[5]||(t[5]=[l("div",{class:"gradient-bg gifts-gradient"},null,-1),l("div",{class:"button-content"},[l("img",{class:"payment-icon",src:"/images/actions/Gifts.svg",alt:"Gifts"}),l("div",{class:"label"},"Gifts")],-1)]))])],2)])):d("",!0),v(Wn,{isOpen:c.value,paymentMethod:"ton",onClose:h,onDeposit:T,onBackToChoosePS:C,currentBalance:e.currentBalance,walletAddress:e.walletAddress},null,8,["isOpen","currentBalance","walletAddress"]),v(Wn,{isOpen:u.value,paymentMethod:"cryptobot",onClose:b,onDeposit:T,onBackToChoosePS:C,currentBalance:e.currentBalance,walletAddress:e.walletAddress},null,8,["isOpen","currentBalance","walletAddress"]),v(Jn,{isOpen:p.value,onClose:k,onBackToChoosePS:C},null,8,["isOpen"])],64))}},[["__scopeId","data-v-124f7c6b"]]),Kn={class:"modal"},Yn={key:0,class:"coin-animation-container"},Qn=["src","alt"],Xn={class:"item-info"},Zn={class:"item-name"},er={class:"item-description"},ar={class:"action-buttons"},tr=["disabled"],sr={class:"price-value"},ir={class:"coin-small"},lr=["disabled"],nr=["disabled"],rr=q({__name:"ModalDropAction",props:{isOpen:{type:Boolean,default:!1},item:{type:Object,default:()=>({id:1,name:"Name Gift",image:"helm4x.png",price:100,description:"Maecenas dignissim justo eget nulla rutrum molestie. Maecenas lobortis sem dui, vel rutrum risus tincidunt ullamcorper. Proin eu enim metus."})}},emits:["close","sell","get","upgrade"],setup(e,{emit:t}){const n=a(),r=e,c=t,u=o(!1),h=o([]),w=()=>{c("close")},b=()=>{u.value=!0,h.value=(e=>{const a=[];for(let t=0;t<e;t++)a.push({id:t,left:80*Math.random()+10,delay:.2*Math.random(),size:10*Math.random()+20,rotation:360*Math.random()});return a})(Math.min(10,r.item.price/10)),setTimeout((()=>{c("sell",{...r.item,isSellingAnimation:!0}),setTimeout((()=>{u.value=!1,h.value=[]}),300)}),600)},y=()=>{c("get",r.item)},A=()=>{n.push("/upgrade")};return(a,t)=>(s(),k(T,{name:"modal-fade"},{default:C((()=>[e.isOpen?(s(),i("div",{key:0,class:"modal-overlay",onClick:_(w,["self"])},[l("div",Kn,[t[4]||(t[4]=l("img",{class:"rectangle",src:"/images/effects/rectangle_modal.png",alt:"Background"},null,-1)),u.value?(s(),i("div",Yn,[(s(!0),i(m,null,g(h.value,(e=>(s(),i("div",{key:e.id,class:"animated-coin",style:f({left:`${e.left}%`,width:`${e.size}px`,height:`${e.size}px`,animationDelay:`${e.delay}s`,transform:`rotate(${e.rotation}deg)`})},[v(ot,{size:"small"})],4)))),128))])):d("",!0),l("button",{class:"close-button",onClick:w},t[0]||(t[0]=[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18M6 6L18 18",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),l("img",{class:"item-image",src:e.item.image,alt:e.item.name},null,8,Qn),l("div",Xn,[l("div",Zn,p(e.item.name),1),l("div",er,p(e.item.description),1)]),l("div",ar,[l("button",{class:"sell-button",onClick:b,disabled:u.value},[t[1]||(t[1]=l("div",{class:"button-label"},"Sell for",-1)),l("div",sr,p(e.item.price),1),l("div",ir,[v(ot,{size:"small"})])],8,tr),l("button",{class:"get-button",onClick:y,disabled:u.value},t[2]||(t[2]=[l("div",{class:"button-label"},"Get Gift",-1)]),8,lr),l("button",{class:"upgrade-button",onClick:A,disabled:u.value},t[3]||(t[3]=[l("div",{class:"button-label"},"Upgrade",-1)]),8,nr)])])])):d("",!0)])),_:1}))}},[["__scopeId","data-v-0cbb215d"]]),or={class:"modal"},cr={class:"get-gift"},ur={key:0,class:"confirmation-message"},dr={key:1,class:"error-message"},vr={class:"button-container"},pr=q({__name:"WithdrawModal",props:{isOpen:{type:Boolean,default:!1},errorMessage:{type:String,default:""}},emits:["close","open-bot","confirm-withdraw"],setup(e,{emit:a}){const n=e,r=a,o=t((()=>{const e=n.errorMessage.toLowerCase();return e.includes("[400 peer_id_invalid]")||e.includes("peer_id_invalid")||e.includes("need to confirm your account")||e.includes("telegram says")})),c=t((()=>{const e=n.errorMessage.toLowerCase();return e.includes("telegram")||e.includes("bot")||e.includes("chat")||e.includes("[400")||e.includes("[401")||e.includes("[403")||e.includes("pyrogram")})),v=()=>{r("close")},m=()=>{r("open-bot")},g=()=>{localStorage.setItem("withdraw_confirmed","true"),r("confirm-withdraw"),v()};return(a,t)=>e.isOpen?(s(),i("div",{key:0,class:"modal-overlay",onClick:_(v,["self"])},[l("div",or,[t[4]||(t[4]=l("div",{class:"modal-background-container"},[l("img",{class:"rectangle",src:"/images/effects/rectangle_modal.png",alt:"Background"})],-1)),l("div",{class:"icon",onClick:v},t[0]||(t[0]=[l("svg",{class:"close",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18M6 6L18 18",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),l("div",cr,p(o.value?"Confirm Your Account":"Withdrawal Failed"),1),o.value?(s(),i("div",ur,t[1]||(t[1]=[l("span",null,[l("span",{class:"text-normal"},[u(" To withdraw items, you need to confirm your account. "),l("br"),u(' Write " ')]),l("span",{class:"text-highlight"}," Hi "),l("span",{class:"text-normal"},' " to our bot and you can receive your gifts. ')],-1)]))):(s(),i("div",dr,p(e.errorMessage),1)),l("div",vr,[o.value||c.value?(s(),i("button",{key:0,class:"primary-button",onClick:m},t[2]||(t[2]=[l("div",{class:"button-label"},"Open dialog with bot",-1)]))):d("",!0),o.value?(s(),i("button",{key:1,class:"secondary-button",onClick:g},t[3]||(t[3]=[l("div",{class:"button-label"},"Confirm Withdraw",-1)]))):d("",!0)])])])):d("",!0)}},[["__scopeId","data-v-f23dd922"]]),mr={class:"frame-2087328929"},gr={class:"label"},fr={class:"coin"},hr={class:"frame-2087328884"},wr=["disabled"],br={key:0,class:"label2"},yr={key:1,class:"loading-spinner"},kr=q({__name:"ModalSellAll",props:{isOpen:{type:Boolean,default:!1},itemCount:{type:Number,default:0},totalPrice:{type:Number,default:0}},emits:["close","sellComplete"],setup(e,{emit:a}){const t=e,n=a,c=w("userStore"),u=o(!1),m=o(!1),g=()=>{m.value||(u.value=!0,setTimeout((()=>{n("close"),u.value=!1}),300))},f=async()=>{if(!m.value)try{m.value=!0;const e=await rt.get("/api/sell_all_items.php",{withCredentials:!0});!0===e.data.status?(e.data.amount&&c&&c.addToBalance(parseFloat(e.data.amount)),n("sellComplete",{totalPrice:e.data.amount||t.totalPrice,itemCount:e.data.count||t.itemCount,success:!0}),setTimeout((()=>{g()}),1e3)):(g(),n("sellComplete",{success:!1,error:e.data.message||"Failed to sell items"}))}catch(e){g(),n("sellComplete",{success:!1,error:e.message||"An unexpected error occurred"})}finally{m.value=!1}};return(a,t)=>e.isOpen?(s(),i("div",{key:0,class:"modal-overlay",onClick:_(g,["self"])},[l("div",{class:r(["modal",{closing:u.value}])},[t[2]||(t[2]=l("div",{class:"frame-2087328889"},[l("div",{class:"confirm"},"Confirm"),l("div",{class:"are-you-sure-you-want-to-sell-all-your-items"}," Are you sure you want to sell all your items? ")],-1)),l("div",{class:"icon",onClick:g},t[0]||(t[0]=[l("svg",{class:"close",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18M6 6L18 18",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),l("div",mr,[l("div",gr,p(e.itemCount)+" items for a total of "+p(e.totalPrice),1),l("div",fr,[v(ot,{size:"small"})])]),l("div",hr,[l("div",{class:r(["button",{loading:m.value}]),onClick:f,disabled:m.value},[m.value?(s(),i("div",yr)):(s(),i("div",br,"Yes, sell all items"))],10,wr),l("div",{class:"button2",onClick:g},t[1]||(t[1]=[l("div",{class:"label3"},"No, back",-1)]))])],2)])):d("",!0)}},[["__scopeId","data-v-dec51503"]]),Cr={class:"inventory-section"},Tr={class:"inventory-header"},Ar={class:"buttons-profile-container"},_r={class:"label"},Sr={key:0,class:"error-message-container"},Ir={class:"error-message-content"},xr={key:1,class:"success-message-container"},Er={class:"success-message-content"},Or={key:2,class:"loading-state"},Mr={key:3,class:"error-state"},Pr={class:"error-message"},Nr={key:4,class:"empty-state"},Dr={key:5,class:"inventory-grid"},Fr=["src","alt"],Rr={class:"item-price-tag"},Ur={class:"coin-wrapper"},Lr={class:"price-value"},Br=["onClick"],zr={key:0,class:"loading-spinner-small"},Wr=["src","alt"],jr={key:6,class:"pagination-loading"},$r={key:7,class:"load-more-container"},qr={key:8,class:"end-of-list"},Hr=q({__name:"OpenStory",setup(e){const t=a(),n=w("userStore"),c=w("webSocket",o(null)),u=w("registerWsHandler",null),h=w("unregisterWsHandler",null),y=o(""),k=o(new Map);let C=0;const T=o([]),A=o(!1),_=o(null),S=o(!0),I=o(0),x=o(!1);o(!1);const E=o(0),O=o(0),M=o(!1),P=o(null),N=o(""),D=o(!1),R=async()=>{try{const e=await rt.get("/api/get_all_skins_to_sell.php",{withCredentials:!0});e.data&&void 0!==e.data.count?(E.value=e.data.count,O.value=e.data.total_amount):(E.value=0,O.value=0)}catch(e){E.value=0,O.value=0}},U=()=>{E.value>0&&O.value>0?x.value=!0:(_.value="You don't have any items to sell",setTimeout((()=>{_.value=null}),3e3))},L=()=>{x.value=!1},B=e=>{e.success?(y.value=`Successfully sold ${e.itemCount} items for ${e.totalPrice} TON!`,E.value=0,O.value=0,setTimeout((()=>{y.value=""}),5e3),T.value=T.value.map((e=>0===e.status?{...e,status:1}:e))):(_.value=e.error||"Failed to sell items",setTimeout((()=>{_.value=null}),5e3))},z=e=>{if(!e)return;const a=e.id,t=e.status,s=e.message||"";if(!a||void 0===t)return;const i=a;let l=null,n=-1;if(n=T.value.findIndex((e=>e.id===i)),-1!==n&&(l=T.value[n]),!l&&k.value.has(i)){const e=k.value.get(i);n=T.value.findIndex((a=>a.id===e)),-1!==n&&(l=T.value[n])}if(!l&&s){let e=null;const a=s.match(/['"]([^'"]+)['"]/);if(a&&a[1])e=a[1];else{const a=s.match(/Gift with title ['']([^'']+)['']/i);a&&a[1]&&(e=a[1])}e&&(n=T.value.findIndex((a=>a.name===e||a.title===e)),-1!==n&&(l=T.value[n],k.value.set(i,l.id)))}if(l){const e=l.status;l.status=t,4===e&&0===t&&(N.value=s,D.value=!0)}else 0===t&&s&&(N.value=s,D.value=!0)},W=async(e,a,t)=>{try{if(!e||!a)return{success:!1,error:"Missing required parameters"};let i="";switch(t){case 0:i="reset to available";break;case 1:i="sold";break;case 2:i="received";break;case 4:i="being sent";break;default:i="updated"}const l={id:a,status:t,message:`Your item has been ${i}`,timestamp:Date.now()};if(c.value&&c.value.readyState===WebSocket.OPEN)try{const a={event:"inventory_update",userId:e,data:l};return c.value.send(JSON.stringify(a)),{success:!0,method:"websocket"}}catch(s){}}catch(i){return{success:!1,error:i.message}}},j=()=>{I.value=0===I.value?1:0,localStorage.setItem("showAvailableFilter",I.value.toString()),C=0,T.value=[],$()},$=async()=>{if(!A.value){A.value=!0,_.value=null;try{let e="/api/load_open_story.php";const a=[];1===I.value&&a.push("showavailable=1"),C>0&&a.push(`page=${C}`),a.length>0&&(e+=`?${a.join("&")}`);const t=await rt.get(e,{withCredentials:!0});if(Array.isArray(t.data)){const e=t.data;T.value=[...T.value,...e],C+=18,S.value=e.length>=18}else _.value="Failed to load items: Invalid response format"}catch(e){_.value="Failed to load items. Please try again."}finally{A.value=!1}}},q=()=>{C=0,T.value=[],S.value=!0,I.value=0,$()},H=e=>{switch(e){case 0:default:return"Information";case 1:return"Sold";case 2:return"Received";case 3:return"Upgraded";case 4:return"Sending..."}},G=e=>{switch(e){case 0:default:return"#FFFFFF";case 1:return"#0075FF";case 2:return"#23C265";case 3:return"#FF8400";case 4:return"#FFA500"}},J=e=>{switch(e){case 1:return"/images/actions/sold.svg";case 2:return"/images/actions/received.svg";case 3:return"/images/actions/upgraded.svg";default:return""}},V=()=>{M.value=!1},K=async e=>{var a;M.value=!1;try{const t=(null==(a=e.originalData)?void 0:a.id)||e.id;if(!t)throw new Error("Item ID not found");const s=await rt.get(`/api/change_drop_status.php?id=${t}&status=sell`,{withCredentials:!0});if(s.data.error)_.value=s.data.error;else if(!0===s.data.status&&s.data.price){const e=parseFloat(s.data.price);isNaN(e)||n.addToBalance(e);const a=T.value.find((e=>e.id===t));a&&(a.status=1,n.state.user.id&&W(n.state.user.id,t,1)),R()}}catch(t){_.value=t.message||"Error selling item"}},Y=async e=>{var a;M.value=!1;try{const t=e.id||(null==(a=e.originalData)?void 0:a.id);if(!t)throw new Error("Frontend item ID not found");if(!("true"===localStorage.getItem("withdraw_confirmed")))return N.value="To withdraw items, you need to confirm your account.",D.value=!0,void(P.value=e);await Q(e,t)}catch(t){_.value=t.message||"Error withdrawing item"}},Q=async(e,a)=>{try{const e=await rt.get(`/api/change_drop_status.php?id=${a}&status=withdraw`,{withCredentials:!0});if(e.data.error)N.value=e.data.error,D.value=!0;else if(!0===e.data.status){const t=e.data.id||a;k.value.set(String(t),a);const s=T.value.find((e=>e.id===a));s&&(s.status=4,s.backendId=t,n.state.user.id&&W(n.state.user.id,t,4)),R()}}catch(t){N.value=t.message||"Error withdrawing item",D.value=!0}},X=()=>{const e="giftrelayer";try{window.Telegram&&window.Telegram.WebApp&&window.Telegram.WebApp.openTelegramLink?window.Telegram.WebApp.openTelegramLink(`https://t.me/${e}`):window.open(`https://t.me/${e}`,"_blank")}catch(a){window.open(`https://t.me/${e}`,"_blank")}},Z=async()=>{var e;if(localStorage.setItem("withdraw_confirmed","true"),P.value){const a=P.value.id||(null==(e=P.value.originalData)?void 0:e.id);a&&await Q(P.value,a)}},ee=()=>{D.value=!1,N.value=""},ae=()=>{t.push("/")};return b((()=>{const e=localStorage.getItem("showAvailableFilter");I.value=null!==e?parseInt(e):0,R(),$(),u&&u("inventory_update",z),c.value})),F((()=>{h&&h("inventory_update")})),(e,a)=>(s(),i("div",Cr,[l("div",Tr,[a[3]||(a[3]=l("div",{class:"section-title"},"Inventory:",-1)),l("div",Ar,[l("div",{class:"button",onClick:j},[l("div",_r,p(1===I.value?"Show all":"Show available"),1)]),E.value>0&&O.value>0?(s(),i("div",{key:0,class:"button",onClick:U},a[2]||(a[2]=[l("div",{class:"label"},"Sell all",-1)]))):d("",!0)])]),_.value?(s(),i("div",Sr,[l("div",Ir,p(_.value),1),l("button",{class:"error-close",onClick:a[0]||(a[0]=e=>_.value=null)},"")])):d("",!0),y.value?(s(),i("div",xr,[l("div",Er,p(y.value),1),l("button",{class:"success-close",onClick:a[1]||(a[1]=e=>y.value=null)},"")])):d("",!0),A.value&&0===T.value.length?(s(),i("div",Or,a[4]||(a[4]=[l("div",{class:"loading-spinner"},null,-1),l("div",{class:"loading-text"},"Loading your inventory...",-1)]))):_.value&&0===T.value.length?(s(),i("div",Mr,[l("div",Pr,p(_.value),1),l("button",{class:"retry-button",onClick:q},a[5]||(a[5]=[l("div",{class:"button-label"},"Try Again",-1)]))])):A.value||0!==T.value.length?(s(),i("div",Dr,[(s(!0),i(m,null,g(T.value,(e=>(s(),i("div",{key:e.id,class:r(["inventory-item",{black_backdrop:e.is_black}])},[l("img",{class:"item-image",src:e.img,alt:e.name},null,8,Fr),l("div",Rr,[l("div",Ur,[v(ot,{size:"small"})]),l("div",Lr,p(e.price),1)]),l("div",{class:r(["item-status",{"status-button":0===e.status,"status-sending":4===e.status}]),onClick:a=>0===e.status?(e=>{P.value={id:e.id,name:e.name,image:e.img,price:e.price,description:`This is a ${e.name} item from your inventory.`},M.value=!0})(e):null,style:f({cursor:0===e.status?"pointer":"default"})},[4===e.status?(s(),i("div",zr)):J(e.status)?(s(),i("img",{key:1,class:"status-icon",src:J(e.status),alt:H(e.status)+" Icon"},null,8,Wr)):d("",!0),l("div",{class:"status-text",style:f({color:G(e.status)})},p(H(e.status)),5)],14,Br)],2)))),128))])):(s(),i("div",Nr,[a[7]||(a[7]=l("div",{class:"empty-state-message"},"You haven't opened any cases yet",-1)),l("button",{class:"open-cases-button",onClick:ae},a[6]||(a[6]=[l("div",{class:"button-label"},"Open Cases",-1)]))])),A.value&&T.value.length>0?(s(),i("div",jr,a[8]||(a[8]=[l("div",{class:"loading-spinner"},null,-1),l("div",{class:"loading-text"},"Loading more items...",-1)]))):d("",!0),!A.value&&S.value&&T.value.length>0?(s(),i("div",$r,[l("button",{class:"load-more-button",onClick:$},a[9]||(a[9]=[l("div",{class:"button-label"},"Load More",-1)]))])):d("",!0),!S.value&&T.value.length>0?(s(),i("div",qr," You've reached the end of your inventory ")):d("",!0),v(rr,{"is-open":M.value,item:P.value,onClose:V,onSell:K,onGet:Y},null,8,["is-open","item"]),v(pr,{"is-open":D.value,"error-message":N.value,onClose:ee,onOpenBot:X,onConfirmWithdraw:Z},null,8,["is-open","error-message"]),v(kr,{"is-open":x.value,"item-count":E.value,"total-price":O.value,onClose:L,onSellComplete:B},null,8,["is-open","item-count","total-price"])]))}},[["__scopeId","data-v-b46ae458"]]),Gr={class:"profile-page"},Jr={class:"profile-container"},Vr={class:"profile-section"},Kr=["src"],Yr={key:1,class:"profile-avatar",src:"/images/effects/profile.svg",alt:"User Avatar"},Qr={class:"profile-info"},Xr={class:"profile-name"},Zr={class:"profile-id"},eo={key:0,class:"wallet-error alert"},ao={class:"balance-section"},to={class:"balance-info"},so={class:"balance-display"},io={class:"balance-amount"},lo={class:"coin-small"},no={class:"balance-actions"},ro={key:0,class:"balance-coin-animation"},oo={class:"wallet-section"},co={key:0,class:"wallet-connected"},uo={class:"wallet-info"},vo={class:"wallet-address"},po=q({__name:"ProfilePage",setup(n){const r=a(),h=e(),y=w("userStore"),{tonConnectUI:k}=j(),C=z(),T=W(),A=o(!0),_=o(null),S=o(!1),I=o(!1),E=o([]),O=t((()=>y.state.user.walletAddress?M(y.state.user.walletAddress):T.value?M(T.value):null)),M=e=>e?e.length<=12?e:`${e.substring(0,5)}...${e.substring(e.length-4)}`:"",P=t((()=>!(!y.state.user.walletAddress&&!T.value)));c((()=>T.value),(async e=>{if(e&&!y.state.user.walletAddress)try{await N(e)}catch(a){_.value=a.message||"Failed to save wallet address"}}));const N=async e=>{try{const a=await rt.post("/api/update_wallet.php",{wallet_address:e},{withCredentials:!0});return a.data.success&&y.connectWallet(e),a.data}catch(a){throw a}},D=async()=>{if(!P.value)try{if(_.value=null,k&&C.value&&T.value)return void(await N(T.value));k?await k.openModal():_.value="TON Connect UI is not available"}catch(e){_.value="Failed to connect wallet: "+(e.message||"Unknown error")}},F=async()=>{try{if(k&&C.value)try{await k.disconnect()}catch(e){}const a=await rt.post("/api/update_wallet.php",{disconnect:!0},{withCredentials:!0});if(!a.data.success)throw new Error(a.data.message||"Failed to disconnect wallet");y.disconnectWallet()}catch(a){_.value="Failed to disconnect wallet: "+(a.message||"Unknown error")}},R=()=>{P.value?S.value=!0:_.value="Please connect a TON wallet first to make deposits."},U=()=>{S.value=!1},L=async e=>{if(e&&!(e<=0))try{const a=Math.min(8,e);E.value=(e=>{const a=[];for(let t=0;t<e;t++)a.push({id:t,left:30*Math.random()+10,bottom:20*Math.random(),delay:.15*Math.random(),size:10*Math.random()+35});return a})(a),I.value=!0,setTimeout((()=>{I.value=!1,E.value=[]}),800)}catch(a){_.value="Deposit failed: "+a.message}};return b((async()=>{if(A.value=!0,C.value&&T.value&&!y.state.user.walletAddress)try{await N(T.value)}catch(e){}A.value=!1,"true"===h.query.openDeposit&&(S.value=!0,r.replace({path:h.path}))})),(e,a)=>(s(),i("div",Gr,[l("div",Jr,[l("div",Vr,[x(y).state.user.photoUrl?(s(),i("img",{key:0,class:"profile-avatar",src:x(y).state.user.photoUrl,alt:"User Avatar"},null,8,Kr)):(s(),i("img",Yr)),l("div",Qr,[l("div",Xr,p(x(y).displayName),1),l("div",Zr,p(x(y).telegramId||"#User"),1)])]),_.value?(s(),i("div",eo,[u(p(_.value)+" ",1),l("button",{class:"close-error",onClick:a[0]||(a[0]=e=>_.value=null)},"")])):d("",!0),l("div",ao,[l("div",to,[a[2]||(a[2]=l("div",{class:"label-small"},"Balance",-1)),l("div",so,[l("div",io,p(x(y).formattedBalance),1),l("div",lo,[v(ot,{size:"small"})])])]),l("div",no,[d("",!0),l("button",{class:"deposit-button",onClick:R},a[4]||(a[4]=[l("div",{class:"button-label"},"Deposit",-1)]))]),I.value?(s(),i("div",ro,[(s(!0),i(m,null,g(E.value,(e=>(s(),i("div",{key:e.id,class:"balance-animated-coin",style:f({left:`${e.left}%`,bottom:`${e.bottom}%`,width:`${e.size}px`,height:`${e.size}px`,animationDelay:`${e.delay}s`})},[v(ot,{size:"small"})],4)))),128))])):d("",!0)]),l("div",oo,[P.value?(s(),i("div",co,[l("div",uo,[a[5]||(a[5]=l("div",{class:"label-small"},"Connected wallet:",-1)),l("div",vo,p(O.value),1)]),l("button",{class:"disconnect-wallet-button",onClick:F},a[6]||(a[6]=[l("div",{class:"button-label"},"Disconnect",-1)]))])):(s(),i("button",{key:1,class:"connect-wallet-button",onClick:D},a[7]||(a[7]=[l("div",{class:"button-label"},"Connect TON Wallet",-1)])))]),v(Hr)]),v(Vn,{"is-open":S.value,"current-balance":x(y).state.user.balance,"wallet-address":x(y).state.user.walletAddress||x(T),onClose:U,onDeposit:L,onOpen:a[1]||(a[1]=e=>S.value=!0)},null,8,["is-open","current-balance","wallet-address"])]))}},[["__scopeId","data-v-7367a625"]]),mo={name:"CircleComponent",components:{Coin:ot},props:{percentage:{type:Number,default:0},betAmount:{type:Number,default:0},desiredPrize:{type:Number,default:0},isAnimating:{type:Boolean,default:!1},selectedItemImage:{type:String,default:null},upgradeResult:{type:Boolean,default:null}},data:()=>({displayedPercentage:0,animationFrameId:null,arrowDegrees:0,arrowTransition:0,gameState:"idle",actionCompleted:!1}),computed:{formattedBetAmount(){return this.betAmount.toFixed(2)},formattedDesiredPrize(){return this.desiredPrize.toFixed(2)},formattedPercentage(){const e=this.displayedPercentage.toFixed(3);return e.endsWith(".000")?e.slice(0,-4):e.endsWith("00")?e.slice(0,-2):e.endsWith("0")?e.slice(0,-1):e},circleCircumference:()=>2*Math.PI*126,strokeDashOffset(){return this.circleCircumference-this.circleCircumference/100*(this.displayedPercentage||0)},arrowGradient(){return"win"===this.gameState?"url(#arrow-gradient-green)":"lose"===this.gameState?"url(#arrow-gradient-red)":"url(#arrow-gradient-blue)"},arrowStyles(){return{transform:`rotate(${this.arrowDegrees}deg)`,transition:`transform ${this.arrowTransition}s`}},arcStrokeColor(){return"win"===this.gameState?"#33EA00":"lose"===this.gameState?"#EA0017":"#0098EA"},arcFilter(){return"win"===this.gameState?"url(#glow-green)":"lose"===this.gameState?"url(#glow-red)":"url(#glow-blue)"}},watch:{percentage:{immediate:!0,handler(e){this.animatePercentage(e)}},isAnimating(e){e&&!this.actionCompleted?this.startUpgradeAnimation():e||this.resetAnimationState()}},methods:{calculateDegreeAngle(){return 3.6*this.displayedPercentage},randomInRange:(e,a)=>Math.random()*(a-e)+e,startUpgradeAnimation(){this.actionCompleted=!0,this.gameState="animating";const e=this.upgradeResult,a=3.6*(this.displayedPercentage||0),t=29/(2*Math.PI*126)*360;let s;if(e){if(a<=2*t+8)s=a/2;else{const e=.1*a,t=.8*a;s=this.randomInRange(e,t)}s>=a&&(s=a/2)}else{if(a>=360-2*t-8)s=a+(360-a)/2;else{const e=a+t+8,i=360-t-8;s=this.randomInRange(e,i)}s<a&&(s=a+2*t+8,s>360&&(s=(a+360)/2))}this.arrowTransition=0,this.arrowDegrees=0,setTimeout((()=>{this.arrowTransition=7,this.arrowDegrees=s+1440,setTimeout((()=>{e?(this.$refs.circlePlate.src="/images/effects/circle_plate_green.svg",this.gameState="win"):(this.$refs.circlePlate.src="/images/effects/circle_plate_red.svg",this.gameState="lose"),this.$emit("upgrade-result",e)}),7400)}),100)},resetAnimationState(){this.arrowTransition=0,this.arrowDegrees=0,this.gameState="idle",this.actionCompleted=!1,this.$refs.circlePlate&&(this.$refs.circlePlate.src="/images/effects/circle_plate.svg")},animatePercentage(e){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),0===this.displayedPercentage&&e>0&&(this.displayedPercentage=0);const a=performance.now(),t=this.displayedPercentage,s=e-t,i=Math.min(Math.max(20*Math.abs(s),300),1500),l=n=>{const r=n-a,o=Math.min(r/i,1),c=o<.5?2*o*o:(4-2*o)*o-1;this.displayedPercentage=t+s*c,o<1?this.animationFrameId=requestAnimationFrame(l):this.displayedPercentage=e};this.animationFrameId=requestAnimationFrame(l)}},beforeUnmount(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId)},mounted(){this.displayedPercentage=this.percentage;(new Image).src="/images/effects/circle_plate_green.svg";(new Image).src="/images/effects/circle_plate_red.svg"}},go={class:"circle-container"},fo={class:"circle-info-panel"},ho={class:"info-column"},wo={class:"hint"},bo={class:"coin"},yo={class:"value"},ko={class:"info-column right"},Co={class:"hint"},To={class:"coin"},Ao={class:"value"},_o={class:"progress-container"},So={src:"/images/effects/circle_plate.svg",class:"circle-bg",alt:"Circle plate",ref:"circlePlate"},Io={class:"progress-circle",width:"264",height:"264",viewBox:"0 0 264 264"},xo=["stroke","filter","stroke-dasharray","stroke-dashoffset"],Eo={class:"center-content"},Oo={class:"percentage-value"},Mo={class:"arrow-wrapper"},Po={xmlns:"http://www.w3.org/2000/svg",width:"29",height:"26",viewBox:"0 0 29 26",fill:"none",class:"arrow-indicator"},No=["fill"];const Do=q(mo,[["render",function(e,a,t,o,c,u){const m=P("Coin");return s(),i("div",go,[l("div",fo,[l("div",ho,[a[0]||(a[0]=l("div",{class:"label"},"Bet Amount:",-1)),l("div",wo,[l("div",bo,[v(m,{size:"small"})]),l("div",yo,p(u.formattedBetAmount),1)])]),l("div",ko,[a[1]||(a[1]=l("div",{class:"label"},"Desired prize:",-1)),l("div",Co,[l("div",To,[v(m,{size:"small"})]),l("div",Ao,p(u.formattedDesiredPrize),1)])])]),l("div",_o,[l("img",So,null,512),a[4]||(a[4]=l("img",{src:"/images/effects/circle_plate_green.svg",class:"circle-bg-preload",alt:"Green plate"},null,-1)),a[5]||(a[5]=l("img",{src:"/images/effects/circle_plate_red.svg",class:"circle-bg-preload",alt:"Red plate"},null,-1)),l("div",{class:r(["circle-border",{animating:t.isAnimating,win:"win"===c.gameState,lose:"lose"===c.gameState}])},null,2),(s(),i("svg",Io,[a[2]||(a[2]=n('<defs data-v-380f65b1><filter id="glow-blue" x="-50%" y="-50%" width="200%" height="200%" data-v-380f65b1><feGaussianBlur stdDeviation="6" result="blur" data-v-380f65b1></feGaussianBlur><feFlood flood-color="#0098EA" flood-opacity="0.5" result="glow-color" data-v-380f65b1></feFlood><feComposite in="glow-color" in2="blur" operator="in" result="glow-blur" data-v-380f65b1></feComposite><feMerge data-v-380f65b1><feMergeNode in="glow-blur" data-v-380f65b1></feMergeNode><feMergeNode in="SourceGraphic" data-v-380f65b1></feMergeNode></feMerge></filter><filter id="glow-green" x="-50%" y="-50%" width="200%" height="200%" data-v-380f65b1><feGaussianBlur stdDeviation="6" result="blur" data-v-380f65b1></feGaussianBlur><feFlood flood-color="#33EA00" flood-opacity="0.5" result="glow-color" data-v-380f65b1></feFlood><feComposite in="glow-color" in2="blur" operator="in" result="glow-blur" data-v-380f65b1></feComposite><feMerge data-v-380f65b1><feMergeNode in="glow-blur" data-v-380f65b1></feMergeNode><feMergeNode in="SourceGraphic" data-v-380f65b1></feMergeNode></feMerge></filter><filter id="glow-red" x="-50%" y="-50%" width="200%" height="200%" data-v-380f65b1><feGaussianBlur stdDeviation="6" result="blur" data-v-380f65b1></feGaussianBlur><feFlood flood-color="#EA0017" flood-opacity="0.5" result="glow-color" data-v-380f65b1></feFlood><feComposite in="glow-color" in2="blur" operator="in" result="glow-blur" data-v-380f65b1></feComposite><feMerge data-v-380f65b1><feMergeNode in="glow-blur" data-v-380f65b1></feMergeNode><feMergeNode in="SourceGraphic" data-v-380f65b1></feMergeNode></feMerge></filter><radialGradient id="arrow-gradient-blue" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(16.6538 6.31449) rotate(101.92) scale(27.4896 65.1506)" data-v-380f65b1><stop stop-color="#0098EA" data-v-380f65b1></stop><stop offset="1" stop-color="#86C5FE" data-v-380f65b1></stop></radialGradient><radialGradient id="arrow-gradient-green" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(16.6538 6.31449) rotate(101.92) scale(27.4896 65.1506)" data-v-380f65b1><stop stop-color="rgba(51, 234, 0, 0.99)" data-v-380f65b1></stop><stop offset="1" stop-color="rgba(145, 254, 134, 0.99)" data-v-380f65b1></stop></radialGradient><radialGradient id="arrow-gradient-red" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(16.6538 6.31449) rotate(101.92) scale(27.4896 65.1506)" data-v-380f65b1><stop stop-color="rgba(234, 0, 23, 0.99)" data-v-380f65b1></stop><stop offset="1" stop-color="rgba(254, 136, 134, 0.99)" data-v-380f65b1></stop></radialGradient></defs><circle cx="132" cy="132" r="126" fill="none" stroke="#131824" stroke-width="10" stroke-linecap="round" data-v-380f65b1></circle>',2)),c.displayedPercentage>0?(s(),i("circle",{key:0,cx:"132",cy:"132",r:"126",fill:"none",stroke:u.arcStrokeColor,"stroke-width":"10",class:r(["progress-arc",{animating:t.isAnimating,win:"win"===c.gameState,lose:"lose"===c.gameState}]),"stroke-linecap":"round",filter:u.arcFilter,"stroke-dasharray":`${u.circleCircumference},20000`,"stroke-dashoffset":u.strokeDashOffset,transform:"rotate(-90,132,132)"},null,10,xo)):d("",!0)])),l("div",Eo,[t.selectedItemImage?(s(),i("div",{key:0,class:"item-image",style:f({backgroundImage:`url(${t.selectedItemImage})`})},null,4)):d("",!0),l("div",{class:r(["percentage-display",{"with-image":t.selectedItemImage,win:"win"===c.gameState,lose:"lose"===c.gameState}])},[l("span",Oo,p(u.formattedPercentage),1),a[3]||(a[3]=l("span",{class:"percentage-symbol"},"%",-1))],2)]),l("div",Mo,[l("div",{class:r(["dial-arrow-wrap",{win:"win"===c.gameState,lose:"lose"===c.gameState}]),style:f(u.arrowStyles)},[(s(),i("svg",Po,[l("path",{d:"M8.36172 7.71428C11.111 2.95238 12.4857 0.571429 14.5476 0.571429C16.6096 0.571428 17.9842 2.95238 20.7335 7.71428L24.8574 14.8571C27.6067 19.619 28.9814 22 27.9504 23.7857C26.9194 25.5714 24.1701 25.5714 18.6716 25.5714H10.4237C4.92511 25.5714 2.17583 25.5714 1.14485 23.7857C0.113863 22 1.48851 19.619 4.23779 14.8571L8.36172 7.71428Z",fill:u.arrowGradient,"fill-opacity":"0.99"},null,8,No)]))],6)])])])}],["__scopeId","data-v-380f65b1"]]),Fo={name:"ItemsComponent",components:{Coin:ot},props:{isAnimating:{type:Boolean,default:!1}},emits:["update-percentage","start-animation","update-bet","update-prize","update-selected-image"],data:()=>({multiplierOptions:[{label:"x1.5",value:1.5},{label:"x2",value:2},{label:"x3",value:3},{label:"x5",value:5},{label:"x10",value:10},{label:"x20",value:20}],selectedMultiplier:null,activeTab:"inventory",selectedInventoryItems:[],selectedDesiredItem:null,inventoryItems:[],desiredItems:[],isLoading:!0,isUpgrading:!1,errorMessage:null}),computed:{displayedItems(){return"inventory"===this.activeTab?this.inventoryItems:this.desiredItems},canUpgrade(){return this.selectedInventoryItems.length>0&&null!==this.selectedDesiredItem},inventoryItemPrice(){return 0===this.selectedInventoryItems.length?0:this.selectedInventoryItems.reduce(((e,a)=>e+this.inventoryItems[a].price),0)},desiredItemPrice(){return null!==this.selectedDesiredItem?this.desiredItems[this.selectedDesiredItem].price:0},selectedItemImage(){return null!==this.selectedDesiredItem?this.desiredItems[this.selectedDesiredItem].image:null},currentPercentage(){if(!this.canUpgrade)return 0;const e=this.inventoryItemPrice,a=this.desiredItemPrice;if(0===e||0===a)return 0;let t=90/(a/e);return t=Math.min(t,75),t=Math.max(t,.001),t},calculatedPrize(){return this.desiredItemPrice}},methods:{formatPrice:e=>e.toFixed(2),findClosestDesiredItem(e){const a=[...this.desiredItems].sort(((e,a)=>e.price-a.price)),t=a.find((a=>a.price>=e));return!t&&a.length>0?a[a.length-1]:t},async fetchInventoryItems(){try{const e=await rt.get("/api/load_open_story.php?showavailable=1",{withCredentials:!0});this.inventoryItems=e.data.map((e=>({id:e.id,name:e.name,image:e.img,price:parseFloat(e.price),is_black:e.is_black,status:e.status})))}catch(e){this.errorMessage="Failed to load inventory items. Please try again."}},async fetchDesiredItems(){try{const e=await rt.get("/api/upgrade_list.php",{withCredentials:!0});this.desiredItems=e.data.map((e=>({id:e.id||e.name,name:e.name,image:e.img,price:parseFloat(e.price),is_black:e.is_black})))}catch(e){this.errorMessage="Failed to load desired items. Please try again."}},selectMultiplier(e){if(!this.isAnimating&&(this.selectedMultiplier=e,this.selectedInventoryItems.length>0&&this.desiredItems.length>0)){const a=this.inventoryItemPrice;let t;t=a*e;const s=this.findClosestDesiredItem(t);if(s){const e=this.desiredItems.findIndex((e=>e.id===s.id&&e.price===s.price));this.setActiveTab("desired"),this.selectedDesiredItem=e,this.updateValues()}}},setActiveTab(e){this.isAnimating||(this.activeTab=e,this.updateValues())},selectItem(e){if(!this.isAnimating){if("inventory"===this.activeTab){const a=this.selectedInventoryItems.indexOf(e);-1===a?this.selectedInventoryItems.push(e):this.selectedInventoryItems.splice(a,1)}else this.selectedDesiredItem=this.selectedDesiredItem===e?null:e;this.updateValues()}},updateValues(){this.$emit("update-percentage",this.currentPercentage),this.$emit("update-bet",this.inventoryItemPrice),this.$emit("update-prize",this.calculatedPrize),this.$emit("update-selected-image",this.selectedItemImage)},async performUpgrade(){var e,a;if(!this.canUpgrade||this.isUpgrading||this.isAnimating)return;this.errorMessage=null,this.isUpgrading=!0;const t=this.selectedInventoryItems.map((e=>this.inventoryItems[e])),s=this.desiredItems[this.selectedDesiredItem];try{const e=await rt.post("/api/upgrade.php",{in:t.map((e=>({id:e.id,name:e.name,price:e.price}))),out:{id:s.id,name:s.name,price:s.price}},{withCredentials:!0});"good"===e.data.status?this.$emit("start-animation",!0,t,e.data):(this.errorMessage=e.data.error||"Failed to perform upgrade",this.isUpgrading=!1)}catch(i){this.errorMessage=(null==(a=null==(e=i.response)?void 0:e.data)?void 0:a.error)||"Failed to perform upgrade",this.isUpgrading=!1}},async refreshInventory(){this.isLoading=!0;try{await this.fetchInventoryItems(),this.selectedInventoryItems=[],this.selectedDesiredItem=null,this.selectedMultiplier=null,this.activeTab="inventory",this.errorMessage=null,this.isUpgrading=!1,this.updateValues()}catch(e){this.errorMessage="Failed to refresh inventory. Please reload the page."}finally{this.isLoading=!1}}},watch:{canUpgrade:{immediate:!0,handler(){this.updateValues()}},selectedDesiredItem:{handler(){this.updateValues()}}},async mounted(){try{await Promise.all([this.fetchInventoryItems(),this.fetchDesiredItems()])}catch(e){this.errorMessage="Failed to load items. Please try again."}finally{this.isLoading=!1}this.updateValues()}},Ro={class:"items-container"},Uo={key:0,class:"error-message"},Lo={class:"tabs"},Bo=["onClick"],zo={class:"text"},Wo={key:0,class:"button-loader"},jo={key:1,class:"label"},$o={class:"tabs2"},qo={key:1,class:"loading"},Ho={key:2,class:"items-grid"},Go=["onClick"],Jo=["src"],Vo={class:"hint"},Ko={class:"coin"},Yo={class:"title"},Qo={key:0,class:"checkmark"},Xo={key:1,class:"checkmark"};const Zo=q(Fo,[["render",function(e,a,t,n,o,c){const f=P("Coin");return s(),i("div",Ro,[o.errorMessage?(s(),i("div",Uo,[u(p(o.errorMessage)+" ",1),l("span",{class:"error-close",onClick:a[0]||(a[0]=e=>o.errorMessage=null)},"")])):d("",!0),l("div",Lo,[(s(!0),i(m,null,g(o.multiplierOptions,((e,a)=>(s(),i("div",{key:a,class:r(["tab-segment",{active:o.selectedMultiplier===e.value,disabled:t.isAnimating}]),onClick:a=>c.selectMultiplier(e.value)},[l("div",zo,p(e.label),1)],10,Bo)))),128))]),l("div",{class:r(["button",{"button-active":c.canUpgrade&&!o.isUpgrading&&!t.isAnimating,"button-disabled":o.isUpgrading||t.isAnimating}]),onClick:a[1]||(a[1]=(...e)=>c.performUpgrade&&c.performUpgrade(...e))},[o.isUpgrading?(s(),i("div",Wo)):(s(),i("div",jo,"Upgrade"))],2),l("div",$o,[l("div",{class:r(["tab-segment",{active:"inventory"===o.activeTab,disabled:t.isAnimating}]),onClick:a[2]||(a[2]=e=>c.setActiveTab("inventory"))},a[4]||(a[4]=[l("div",{class:"text"},"Your inventory",-1)]),2),l("div",{class:r(["tab-segment",{active:"desired"===o.activeTab,disabled:t.isAnimating}]),onClick:a[3]||(a[3]=e=>c.setActiveTab("desired"))},a[5]||(a[5]=[l("div",{class:"text"},"Desired gift",-1)]),2)]),o.isLoading?(s(),i("div",qo,a[6]||(a[6]=[l("div",{class:"loading-spinner"},null,-1),l("div",{class:"loading-text"},"Loading items...",-1)]))):(s(),i("div",Ho,[(s(!0),i(m,null,g(c.displayedItems,((e,n)=>(s(),i("div",{key:n,class:r(["item-tab",{selected:"inventory"===o.activeTab&&o.selectedInventoryItems.includes(n)||"desired"===o.activeTab&&o.selectedDesiredItem===n,faded:"desired"===o.activeTab&&null!==o.selectedDesiredItem&&o.selectedDesiredItem!==n,black_backdrop:!0===e.is_black,disabled:t.isAnimating}]),onClick:e=>c.selectItem(n)},[l("img",{src:e.image,alt:"Item",class:"item-image"},null,8,Jo),l("div",Vo,[l("div",Ko,[v(f,{size:"small"})]),l("div",Yo,p(c.formatPrice(e.price)),1)]),"inventory"===o.activeTab&&o.selectedInventoryItems.includes(n)?(s(),i("div",Qo,a[7]||(a[7]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[l("path",{d:"M4.66634 8.00016L7.96617 11.3L15.0378 4.229M1.36621 8.03369L4.66604 11.3335M11.737 4.26253L8.2015 7.79807",stroke:"#0098EA","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):d("",!0),"desired"===o.activeTab&&o.selectedDesiredItem===n?(s(),i("div",Xo,a[8]||(a[8]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[l("path",{d:"M4.66634 8.00016L7.96617 11.3L15.0378 4.229M1.36621 8.03369L4.66604 11.3335M11.737 4.26253L8.2015 7.79807",stroke:"#0098EA","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):d("",!0)],10,Go)))),128))]))])}],["__scopeId","data-v-10f5bf62"]]),ec={class:"modal"},ac={key:0,class:"win-container"},tc={class:"prize-showcase"},sc={class:"lights-container"},ic=["src"],lc={key:0,class:"prize-placeholder"},nc=["src"],rc={key:1,class:"prize-image error-image",src:"/images/placeholder.png",alt:"Prize Item Placeholder"},oc={key:2,class:"coins-container"},cc={class:"text"},uc={class:"item-name"},dc={class:"hint"},vc={class:"coin-wrapper"},pc={class:"price"},mc={key:0,class:"api-error"},gc={class:"action-buttons"},fc=["disabled"],hc=["disabled"],wc={class:"price-tag"},bc={class:"price-value"},yc={class:"coin-small"},kc={key:1,class:"unlucky-container"},Cc={__name:"ModalUpgrade",props:{isOpen:{type:Boolean,default:!1},isWin:{type:Boolean,default:!1},prize:{type:Object,default:()=>null},isBlackCase:{type:Boolean,default:!1}},emits:["close","reset"],setup(e,{emit:a}){const t=e,n=w("userStore"),c=a,h=o(!1),b=o(!1),y=o(!1),A=o(!1),S=o([]),I=o(""),x=()=>{h.value||b.value||(h.value=!0,setTimeout((()=>{h.value=!1,c("reset"),c("close")}),1500))},E=async()=>{if(!h.value&&!b.value)if(t.prize&&t.prize.id)try{b.value=!0,I.value="";const e=15;S.value=Array(e).fill().map(((e,a)=>({id:a,left:Math.floor(80*Math.random())+10+"%",delay:.5*Math.random(),size:Math.floor(10*Math.random())+16+"px",speed:.5*Math.random()+1.2+"s"})));const a=await rt.get(`/api/change_drop_status.php?id=${t.prize.id}&status=sell`,{withCredentials:!0});if(a.data.error)return I.value=a.data.error||"Error selling item",void(b.value=!1);if(!0===a.data.status&&a.data.price){const e=parseFloat(a.data.price);n&&!isNaN(e)&&n.addToBalance(e)}setTimeout((()=>{b.value=!1,c("reset"),c("close")}),1500)}catch(e){I.value=e.message||"Error selling item. Please try again.",b.value=!1}else I.value="No valid prize to sell"},O=()=>{c("reset"),c("close")},M=()=>{c("reset"),c("close")};return(a,t)=>(s(),k(T,{name:"modal-fade"},{default:C((()=>{var a,n,o,c;return[e.isOpen?(s(),i("div",{key:0,class:"modal-overlay",onClick:_(M,["self"])},[l("div",ec,[e.isWin?(s(),i("div",ac,[l("div",tc,[l("div",sc,[l("img",{class:r(["lights",{"black-lights":e.isBlackCase}]),src:e.isBlackCase?"/images/effects/black_backdrop.svg":"/images/effects/lights.png",alt:"Background lights"},null,10,ic),t[2]||(t[2]=l("img",{class:"stars stars-animation",src:"/images/effects/stars.png",alt:"Stars"},null,-1))]),y.value||A.value?d("",!0):(s(),i("div",lc,t[3]||(t[3]=[l("div",{class:"loading-spinner"},null,-1)]))),l("img",{class:r(["prize-image",{"keep-it-animation":h.value,"quick-sell-animation":b.value,loaded:y.value,hidden:!y.value&&!A.value}]),src:(null==(a=e.prize)?void 0:a.img)||"/images/placeholder.png",alt:"Prize Item",onLoad:t[0]||(t[0]=e=>y.value=!0),onError:t[1]||(t[1]=e=>A.value=!0)},null,42,nc),A.value?(s(),i("img",rc)):d("",!0),b.value?(s(),i("div",oc,[(s(!0),i(m,null,g(S.value,(e=>(s(),i("div",{key:e.id,class:"flying-coin",style:f({left:e.left,animationDelay:e.delay+"s",width:e.size,height:e.size,animationDuration:e.speed})},[v(ot,{size:"small"})],4)))),128))])):d("",!0)]),l("div",cc,[l("div",uc,p((null==(n=e.prize)?void 0:n.name)||"Prize Item"),1),l("div",dc,[l("div",vc,[v(ot,{size:"small"})]),l("div",pc,p((null==(o=e.prize)?void 0:o.price)||"0"),1)])]),I.value?(s(),i("div",mc,p(I.value),1)):d("",!0),l("div",gc,[l("button",{class:"spin-button",onClick:x,disabled:h.value||b.value},t[4]||(t[4]=[l("div",{class:"button-label"},"Keep it",-1)]),8,fc),l("button",{class:"quick-spin-button",onClick:E,disabled:h.value||b.value},[t[5]||(t[5]=l("div",{class:"button-label"},"Quick Sell",-1)),l("div",wc,[l("div",bc,p((null==(c=e.prize)?void 0:c.price)||"0"),1),l("div",yc,[v(ot,{size:"small"})])])],8,hc)])])):(s(),i("div",kc,[t[7]||(t[7]=l("img",{class:"unlucky-image",src:"/images/effects/unlucky.png",alt:"Unlucky"},null,-1)),t[8]||(t[8]=l("div",{class:"unlucky-text"},[u(" It was not possible to improve the gift. "),l("br"),u(" Don't be disappointed, you will be lucky next time. ")],-1)),l("div",{class:"action-buttons"},[l("button",{class:"spin-button full-width-button",onClick:O},t[6]||(t[6]=[l("div",{class:"button-label"},"Try Again",-1)]))])])),l("button",{class:"close-button",onClick:M},t[9]||(t[9]=[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18M6 6L18 18",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])])):d("",!0)]})),_:1}))}},Tc=M({name:"UpgradesPage",components:{UserHeader:Ni,Circle:Do,LiveDrop:si,Items:Zo,ModalUpgrade:q(Cc,[["__scopeId","data-v-acd98d1a"]])},setup(){const e=o(0),a=o(0),t=o(0),s=o(!1),i=o(null),l=o([]),n=o(null),r=o(!1),c=o(!1),u=o(null),d=o(!1),v=o(null);return{percentage:e,betAmount:a,desiredPrize:t,isAnimating:s,selectedItemImage:i,selectedItems:l,showResultModal:r,upgradeWin:c,winningPrize:u,isBlackCase:d,upgradeResult:n,itemsComponent:v,updatePercentage:a=>{e.value=a},updateBetAmount:e=>{a.value=e},updateDesiredPrize:e=>{t.value=e},updateSelectedImage:e=>{i.value=e},startAnimation:(e,a=[],t=null)=>{e?(l.value=[...a],s.value=!0,t&&(c.value=t.is_win,n.value=t.is_win,t.is_win&&t.win&&t.win.length>0&&(u.value=t.win[0],d.value=!0===t.win[0].is_black))):(s.value=!1,n.value=null)},handleUpgradeResult:e=>{setTimeout((()=>{r.value=!0}),2e3),setTimeout((()=>{s.value=!1}),3e3)},closeModal:()=>{r.value=!1},resetUpgrade:()=>{s.value=!1,l.value=[],r.value=!1,c.value=!1,n.value=null,u.value=null,d.value=!1,v.value&&v.value.refreshInventory()}}}}),Ac={class:"upgrade-page"},_c={class:"upgrade-content"};const Sc=[{path:"/",name:"Main",component:Ui},{path:"/weekly",name:"Weekly",component:Pl},{path:"/invite",name:"Invite",component:On},{path:"/profile",name:"Profile",component:po},{path:"/upgrade",name:"Upgrade",component:q(Tc,[["render",function(e,a,t,n,r,o){const c=P("UserHeader"),u=P("LiveDrop"),d=P("Circle"),p=P("Items"),m=P("ModalUpgrade");return s(),i("div",Ac,[v(c),v(u),l("div",_c,[v(d,{percentage:e.percentage,"bet-amount":e.betAmount,"desired-prize":e.desiredPrize,"is-animating":e.isAnimating,"selected-item-image":e.selectedItemImage,"upgrade-result":e.upgradeResult,onUpgradeResult:e.handleUpgradeResult},null,8,["percentage","bet-amount","desired-prize","is-animating","selected-item-image","upgrade-result","onUpgradeResult"]),a[0]||(a[0]=l("div",{class:"section-title"},"Choose a gift for upgrade",-1)),v(p,{ref:"itemsComponent","is-animating":e.isAnimating,onUpdatePercentage:e.updatePercentage,onUpdateBet:e.updateBetAmount,onUpdatePrize:e.updateDesiredPrize,onUpdateSelectedImage:e.updateSelectedImage,onStartAnimation:e.startAnimation},null,8,["is-animating","onUpdatePercentage","onUpdateBet","onUpdatePrize","onUpdateSelectedImage","onStartAnimation"]),v(m,{"is-open":e.showResultModal,"is-win":e.upgradeWin,prize:e.winningPrize,"is-black-case":e.isBlackCase,onClose:e.closeModal,onReset:e.resetUpgrade},null,8,["is-open","is-win","prize","is-black-case","onClose","onReset"])])])}],["__scopeId","data-v-e0719e7a"]])}],Ic=U({history:L(),routes:Sc}),xc=["https://case-cash.website","https://case-depchik.website","https://case-deposit.website","https://casedeposit.website","https://case-dep.website","https://casedep.website","https://cases-cash.website","https://cases-depchik.website","https://cases-deposit.website","https://cases-dep.website","https://caseston.website","https://case-ton.website","https://caseton.website","https://cash-cases.website","https://cash-case.website","https://dep-case.website","https://depchik-cases.website","https://deposit-case.website","https://depositcase.website"];const Ec=function(){const e=Math.floor(Math.random()*xc.length);return xc[e]}()+"/tonconnect-manifest.json";window.Telegram&&window.Telegram.WebApp&&window.Telegram.WebApp.expand(),document.addEventListener("touchstart",(function(e){e.touches.length>1&&e.preventDefault()}),{passive:!1});let Oc=0;document.addEventListener("touchend",(function(e){const a=Date.now();a-Oc<=300&&e.preventDefault(),Oc=a}),{passive:!1}),document.documentElement.style.touchAction="manipulation",B(Zs).use($,{manifestUrl:Ec,connectRequestTimeout:5e4,debugEnabled:!1}).use(Ic).mount("#app");
